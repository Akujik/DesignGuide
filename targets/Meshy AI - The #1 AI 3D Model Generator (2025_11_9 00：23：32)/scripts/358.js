try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="f5a6bc00-9051-4a6b-87bc-7f8b9d7ab99a",e._sentryDebugIdIdentifier="sentry-dbid-f5a6bc00-9051-4a6b-87bc-7f8b9d7ab99a")}()}catch(e){}!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[(new e.Error).stack]=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(null!=r)for(var a in r)r.hasOwnProperty(a)&&(e[a]=r[a])}return e}({},e._sentryModuleMetadata[(new e.Error).stack],{"_sentryBundlerPluginAppKey:bWVzaHktd2ViYXBwLSMx":!0})}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2073],{957:(e,t,r)=>{r.d(t,{a:()=>b});var a,n=r(95155),i=r(12115);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let l=function(e){return i.createElement("svg",o({width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=i.createElement("path",{d:"M11.857.833a.488.488 0 1 0-.69-.69L.143 11.167a.488.488 0 1 0 .69.69L11.857.833ZM11.857 6.345a.488.488 0 0 0-.69-.69l-5.513 5.511a.488.488 0 1 0 .69.69l5.513-5.511Z",fill:"#696969"})))};var s=r(74765),d=r(36493);let c=(0,r(75731).vt)(e=>({widgets:{},bringToTop:t=>e(e=>{let r=Math.max(...Object.values(e.widgets));return{widgets:{...Object.fromEntries(Object.entries({...e.widgets,[t]:r+1}).sort((e,t)=>{let[,r]=e,[,a]=t;return r-a}).map((e,t)=>{let[r,a]=e;return[r,t+1]})),[t]:r}}}),registerWidget:t=>e(e=>{let r=Object.values(e.widgets).reduce((e,t)=>Math.max(e,t),0)+1;return{widgets:{...e.widgets,[t]:r}}}),unregisterWidget:t=>e(e=>{let{[t]:r,...a}=e.widgets;return{widgets:Object.fromEntries(Object.entries(a).sort((e,t)=>{let[,r]=e,[,a]=t;return r-a}).map((e,t)=>{let[r,a]=e;return[r,t+1]}))}})}));var u=r(66599),p=r(58064),m=r(41137),g=r(51143),f=r(41198),h=r(2186);function x(e){let{onChange:t,targetRef:r}=e,[a,n]=(0,i.useState)(!1),o=(0,i.useRef)({x:0,y:0}),l=(0,i.useRef)({x:0,y:0,width:0,height:0}),s=e=>({x:e.clientX,y:e.clientY});return{targetRef:r,onPointerDown:e=>{if(o.current=s(e),r.current){let e=r.current.getBoundingClientRect();l.current={x:e.left,y:e.top,width:e.width,height:e.height}}n(!0),e.currentTarget.setPointerCapture(e.pointerId)},onPointerMove:e=>{if(!a)return;let r=s(e);t({x:r.x-o.current.x,y:r.y-o.current.y},l.current)},onPointerUp:()=>{n(!1)}}}let b=e=>{let{topPosition:t=144,leftPosition:r=380,rightPosition:a,bottomPosition:o,headers:b,children:v,dialogOpen:E,setDialogOpen:y,bringToTopTrigger:I,className:w,resizable:D,preventHeaderEvents:j=!0,limits:L,defaultWidth:S=560,defaultHeight:P=560}=e,{minWidth:_=S,maxWidth:A=1/0,minHeight:O=P,maxHeight:N=1/0}=L||{},T=(0,d.B)(),[C,M]=(()=>{let e=(0,i.useId)(),{widgets:t,bringToTop:r,registerWidget:a,unregisterWidget:n}=c();return(0,i.useEffect)(()=>(a(e),()=>{n(e)}),[e,a,n]),[t[e]||0,()=>r(e)]})(),k=(0,i.useRef)(null),{width:U,height:R}=(0,p.l)(),z=()=>{let e=r,n=t;return void 0!==a&&(e=U-a-S),void 0!==o&&(n=R-o-P),{x:e,y:n}},[B,F]=(0,i.useState)(z()),Y=e=>{var t,r;let{x:a,y:n}=(t=e.x,r=e.y,{x:Math.max(Math.min(t,U-W.width-12),12),y:Math.max(Math.min(r,R-W.height-12),60)});F({x:a,y:n})},[W,V]=(0,i.useState)({width:S,height:P});(0,i.useEffect)(()=>{V({width:S,height:P}),E&&(Y(z()),M())},[E]),(0,i.useEffect)(()=>{M()},[I]);let{onPointerDown:q,onPointerMove:X,onPointerUp:Z}=x({onChange:(e,t)=>{Y({x:t.x+e.x,y:t.y+e.y})},targetRef:k}),{onPointerDown:G,onPointerMove:H,onPointerUp:J}=x({onChange:(e,t)=>{var r,a;V((r=t.width+e.x,a=t.height+e.y,{width:Math.max(Math.min(Math.min(r,U-12-B.x),A),_),height:Math.max(Math.min(Math.min(a,R-12-B.y),N),O)}))},targetRef:k});return((0,i.useEffect)(()=>{(()=>{let e=B.x,t=B.y,r=U-12,a=R-12;e+W.width>r&&(e=Math.max(0,r-W.width)),t+W.height>a&&(t=Math.max(0,a-W.height)),e<12&&(e=12),t<60&&(t=60),F({x:e,y:t})})()},[U,R]),(0,m.O)([["Escape",()=>{E&&document.activeElement===document.body&&y(!1)}]]),E)?(0,n.jsx)(g.b,{className:(0,u.cn)("absolute top-0 left-0 z-100"),style:{transform:"translate(".concat(B.x,"px, ").concat(B.y,"px)"),zIndex:C+50},onPointerDown:()=>M(),container:T,children:(0,n.jsx)("div",{className:"flex items-center justify-center focus:outline-hidden",children:(0,n.jsxs)("div",{ref:k,style:{width:W.width,height:W.height},className:(0,u.cn)("border-bg-border bg-bg-sub relative flex flex-col overflow-hidden rounded-3xl border-[0.5px] p-0 shadow-xl focus:outline-hidden","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",w),"data-state":E?"open":"closed",children:[(0,n.jsxs)("div",{className:"hover:bg-bg-base border-bg-border bg-bg-sub flex w-full cursor-move items-center justify-between gap-4 rounded-t-3xl border-b-[0.5px] px-4 py-2 transition duration-100",onPointerDown:q,onPointerMove:X,onPointerUp:Z,children:[(0,n.jsx)("div",{className:"pointer-events-none",children:(0,n.jsx)(f.A,{className:"stroke-bg-border size-4"})}),(0,n.jsx)("div",{onPointerDown:e=>{j&&(e.stopPropagation(),M())},className:(0,u.cn)({"cursor-auto":j}),children:b}),(0,n.jsx)("div",{onPointerDown:e=>{e.stopPropagation(),M()},className:"flex items-center",children:(0,n.jsx)(s.default,{size:"md",type:"icon-tertiary",icon:(0,n.jsx)(h.A,{stroke:1.5}),onClick:()=>{y(!1)}})})]}),(0,n.jsx)("div",{className:"relative w-full grow overflow-auto select-none",children:v}),D&&(0,n.jsx)("div",{className:"absolute right-0 bottom-0 size-5 cursor-nwse-resize",onPointerDown:G,onPointerMove:H,onPointerUp:J,children:(0,n.jsx)(l,{})})]})})}):null}},3114:(e,t,r)=>{r.d(t,{Gz:()=>o,Jt:()=>n,YC:()=>i,qR:()=>a});let a=e=>{{let t=window.location.hash;if(t&&t===e){let e=window.location.href.split("#")[0];return window.history.replaceState({...window.history.state,as:e,url:e},"",e),!0}}return!1};function n(e){if(!e)return null;try{let t=new URL(e).pathname;return t.substring(t.lastIndexOf("/")+1)}catch(e){return console.error("Invalid URL:",e),null}}function i(e){return"https://cdn.meshy.ai/webapp-assets".concat(e)}function o(e){try{return new URL(e),!0}catch(e){return!1}}},28534:(e,t,r)=>{r.d(t,{D8:()=>n,O$:()=>i,qz:()=>a});var a=function(e){return e.VALIDATION="VALIDATION",e.UPLOAD="UPLOAD",e.CANCELLED="CANCELLED",e}({}),n=function(e){return e.FILE_SIZE_EXCEEDS_LIMIT="File size exceeds limit",e.FILE_TYPE_NOT_SUPPORTED="File type not supported",e.FILE_IS_EMPTY="File is empty",e.CUSTOM_VALIDATION="Custom validation",e.PIL_DECOMPRESSION_BOMB="PIL decompression bomb",e}({}),i=function(e){return e.ADD="ADD",e.REMOVE="REMOVE",e.CLEAR="CLEAR",e.UPDATE="UPDATE",e.UPLOAD_START="UPLOAD_START",e.UPLOAD_SUCCESS="UPLOAD_SUCCESS",e.UPLOAD_ERROR="UPLOAD_ERROR",e.UPLOAD_CANCEL="UPLOAD_CANCEL",e}({})},35690:(e,t,r)=>{r.d(t,{$d:()=>g,Hh:()=>m,RY:()=>f,T0:()=>h,jD:()=>p,kU:()=>d,sB:()=>u});var a=r(28534),n=r(3114),i=r(18955),o=r(74879),l=r(2750);l.Ik({id:l.Yj(),status:l.k5(["idle","uploading","success","error","cancelled"]),name:l.Yj().optional(),file:l.Nl(File).optional(),url:l.Yj().optional(),preview:l.Yj().optional(),error:l.Ik({type:l.k5([a.qz.VALIDATION,a.qz.UPLOAD,a.qz.CANCELLED]),validationCode:l.k5([a.D8.FILE_SIZE_EXCEEDS_LIMIT,a.D8.FILE_TYPE_NOT_SUPPORTED,a.D8.FILE_IS_EMPTY,a.D8.PIL_DECOMPRESSION_BOMB,a.D8.CUSTOM_VALIDATION]).optional(),message:l.Yj().optional()}).optional(),data:l.bz().optional()});let s={[a.D8.FILE_SIZE_EXCEEDS_LIMIT]:"File size exceeds limit",[a.D8.FILE_TYPE_NOT_SUPPORTED]:"File type not supported",[a.D8.FILE_IS_EMPTY]:"File is empty",[a.D8.PIL_DECOMPRESSION_BOMB]:"PIL decompression bomb",[a.D8.CUSTOM_VALIDATION]:"Custom validation"},d=()=>{let e=(0,i.c3)();return t=>{if(t.type===a.qz.VALIDATION)switch(t.code){case a.D8.FILE_SIZE_EXCEEDS_LIMIT:return e("Common.Upload.Validation.FileSizeExceedsLimit",{maxSize:t.maxSize});case a.D8.FILE_TYPE_NOT_SUPPORTED:return e("Common.Upload.Validation.FileTypeNotSupported",{accept:t.accept.join(", ").toUpperCase()});case a.D8.FILE_IS_EMPTY:return e("Workspace.Shared.Sidebar.ErrorMessage.ImageEmpty");case a.D8.PIL_DECOMPRESSION_BOMB:return e("Workspace.Shared.Sidebar.ErrorMessage.ImagePixelLimitError",{pixels:t.width*t.height,limit:f})}else if(t.type===a.qz.UPLOAD)return e("Component.ImageUploadArea.Toast.UploadFailure");return""}},c=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxSize:r,accept:n,validator:i,checkPIL:o,getErrorMessage:l}=t,d={type:a.qz.VALIDATION};if(r&&e.size>1024*r*1024)return d.validationCode=a.D8.FILE_SIZE_EXCEEDS_LIMIT,d.message=(null==l?void 0:l({type:a.qz.VALIDATION,code:a.D8.FILE_SIZE_EXCEEDS_LIMIT,maxSize:r,fileSize:e.size}))||s[a.D8.FILE_SIZE_EXCEEDS_LIMIT],d;if(n&&n.length>0){var c;let t=".".concat(null==(c=e.name.split(".").pop())?void 0:c.toLowerCase());if(!n.some(r=>r.startsWith(".")?t===r.toLowerCase():e.type===r))return d.validationCode=a.D8.FILE_TYPE_NOT_SUPPORTED,d.message=(null==l?void 0:l({type:a.qz.VALIDATION,code:a.D8.FILE_TYPE_NOT_SUPPORTED,accept:n,fileExtension:t,fileType:e.type}))||s[a.D8.FILE_TYPE_NOT_SUPPORTED],d}if(0===e.size)return d.validationCode=a.D8.FILE_IS_EMPTY,d.message=(null==l?void 0:l({type:a.qz.VALIDATION,code:a.D8.FILE_IS_EMPTY}))||s[a.D8.FILE_IS_EMPTY],d;if(o){let{exceedPILLimit:t,width:r,height:n}=await h(e);if(t)return d.validationCode=a.D8.PIL_DECOMPRESSION_BOMB,d.message=(null==l?void 0:l({type:a.qz.VALIDATION,code:a.D8.PIL_DECOMPRESSION_BOMB,width:r,height:n}))||s[a.D8.PIL_DECOMPRESSION_BOMB],d}if(i){let t=i(e);if(t)return d.validationCode=a.D8.CUSTOM_VALIDATION,d.message=t,d}return null},u=e=>{var t;return{id:e.id||(0,o.A)(),status:"idle",name:(null==(t=e.file)?void 0:t.name)||(null==e?void 0:e.url)&&(0,n.Jt)(null==e?void 0:e.url)||"image",...e}},p=e=>u({...e,status:"success"}),m=e=>{var t,r;return(null==(t=e.data)?void 0:t.name)||e.name||(null==(r=e.file)?void 0:r.name)||""},g=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=await c(e,t),a=u({file:e});return r&&(a.error=r,a.status="error"),a},f=0xaaaaaaa,h=e=>new Promise(t=>{let r=new window.Image,a=URL.createObjectURL(e);r.onload=()=>{URL.revokeObjectURL(a);let e=r.naturalWidth*r.naturalHeight;t({width:r.naturalWidth,height:r.naturalHeight,exceedPILLimit:e>f})},r.onerror=()=>{URL.revokeObjectURL(a),t({width:0,height:0,exceedPILLimit:!1})},r.src=a})},36924:(e,t,r)=>{r.d(t,{B:()=>d});var a=r(95155),n=r(957),i=r(66599),o=r(58064),l=r(15239),s=r(12115);let d=()=>{let[e,t]=(0,s.useState)(!1),[r,d]=(0,s.useState)(""),[c,u]=(0,s.useState)([]),[p,m]=(0,s.useState)(0),[g,f]=(0,s.useState)(0),{width:h,height:x}=(0,o.l)();return(0,s.useEffect)(()=>{m((x-560)/2),f((h-560)/2)},[x,h]),{dialogComponent:(0,a.jsx)(n.a,{topPosition:p,leftPosition:g,dialogOpen:e,setDialogOpen:t,headers:(0,a.jsx)("div",{className:"flex gap-1.5",children:c.map(e=>(0,a.jsx)(l.default,{src:e,width:32,height:32,unoptimized:!0,alt:"",className:(0,i.cn)("border-bg-border size-8 cursor-pointer rounded-lg border object-contain",{"border-accent-base":r===e}),onClick:()=>d(e)},e))}),defaultWidth:560,defaultHeight:604,children:(0,a.jsx)("div",{className:"relative flex size-full items-center justify-center p-6",children:r&&(0,a.jsx)(l.default,{src:r,alt:"texture-preview",width:507,height:507,className:"size-[507px] object-contain",unoptimized:!0})})}),openDialog:(e,r)=>{t(!0),d(e),u(r||[e])},isDialogOpen:e}}},52073:(e,t,r)=>{r.d(t,{A:()=>R,e:()=>U});var a=r(95155),n=r(52513),i=r(15260),o=r(74765),l=r(284),s=r(70957),d=r(84636),c=r(880),u=r(52787),p=r(35690),m=r(36924),g=r(22317),f=r(38143),h=r(131),x=r(1888),b=r(66599),v=r(92224),E=r(14677),y=r(71201),I=r(48488),w=r(77872),D=r(2186),j=r(61456),L=r(47522),S=r(69095),P=r(18955),_=r(15239),A=r(12115),O=r(3114),N=r(94232),T=r(25528);let C=function(){let{enabled:e,processFile:t,uploadImageByURLAction:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,P.c3)(),{ref:n,hovered:i}=(0,N.M)();async function o(e){let t=e.getAsFile();return t?{type:"processFile",payload:t}:null}async function l(e){var t;let r=null==(t=e.clipboardData)?void 0:t.getData("text/plain");return r?(0,O.Gz)(r)?{type:"upload",payload:{url:r}}:(c.toast.error(a("Workspace.Shared.Sidebar.ErrorMessage.URLInvalid")),null):null}async function s(e,t){return"file"===e.kind&&e.type.startsWith("image/")?o(e):"text/plain"===e.type?l(t):null}return(0,T.M)("paste",async a=>{var o;if(!e||!i||["TEXTAREA","INPUT"].includes(a.target.tagName))return;let l=null==(o=a.clipboardData)?void 0:o.items;if(!l)return;let d=[],c=Array.from(l).map(e=>s(e,a));(d=(await Promise.all(c)).filter(e=>null!==e)).length>0&&t&&d.forEach(async e=>{"processFile"===e.type?await t(function(e){let t=new DataTransfer;return e.forEach(e=>{t.items.add(e)}),t.files}([e.payload])):"upload"===e.type&&await (null==r?void 0:r(e.payload.url)),setTimeout(()=>{var e,t;null==(e=n.current)||e.focus(),null==(t=n.current)||t.blur()},500)})}),{hovered:i,ref:n}},M=e=>Array.from(new DOMParser().parseFromString(e,"text/html").getElementsByTagName("img")).map(e=>e.src),k=async e=>new Promise(t=>{e.getAsString(e=>{t(e)})}),U=new Set([".jpg",".jpeg",".png",".webp"]),R=e=>{let{className:t,required:r=!1,onUpload:O,onBeforeUpload:N,onRemove:T,onRemoveBackground:R,uploadingContent:z,size:B="lg",title:F,description:Y,label:W,accept:V="image/png, image/jpeg, image/webp",maxFileSize:q,showRemoveButton:X=!0,showDefaultIcon:Z=!0,canDropFileAfterUpload:G=!1,uploadEndpoint:H="private",uploadDirectories:J,enablePasteImage:K=!1,enableRemoveBackground:$=!1,enablePreview:Q=!1,onPreviewClick:ee,ref:et}=e,{isPremiumTooltipRedesign:er}=(0,l.f)(),ea=(0,P.c3)(),en=(0,f.j)(e=>e.getCreditDialogRef),{data:ei}=(0,h.o)(),eo="free"===ei.tier,[el,es]=(0,A.useState)(!1),{isAuthenticated:ed}=(0,g.n)(),ec=(0,A.useRef)(null),[eu,ep]=(0,A.useState)(""),[em,eg]=(0,A.useState)("idle"),[ef,eh]=(0,A.useState)(!1),ex=(0,A.useRef)(new AbortController),eb=ed&&("idle"===em||"uploaded"===em&&G),ev=async e=>{if(!e||1!==e.length)return void c.toast.error(ea("Workspace.Shared.Sidebar.ErrorMessage.ImageNumberError"));let t=e[0];if(!(0,v.AW)(t.name,U))return void c.toast.error(ea("Workspace.Shared.Sidebar.ErrorMessage.ImageFormatError"));if("number"==typeof q&&t.size>q)return void c.toast.error(ea("Workspace.Shared.Sidebar.ErrorMessage.ImageSizeError"));if(0===t.size)return void c.toast.error(ea("Workspace.Shared.Sidebar.ErrorMessage.ImageEmpty"));let{width:r,height:a,exceedPILLimit:n}=await (0,p.T0)(t);if(n)return void c.toast.error(ea("Workspace.Shared.Sidebar.ErrorMessage.ImagePixelLimitError",{pixels:(r*a).toLocaleString(),limit:p.RY.toLocaleString()}));let i=await eP(t);if(!i)return void eg("idle");eg("uploaded"),O({url:i.url,id:i.id,name:i.name})},eE=e=>{if(!ed)return void(0,i.j)();eb&&(e.preventDefault(),es(!0))},ey=(0,A.useCallback)(async(e,t)=>{let{removeBackground:r=!1,skipNameGeneration:a=!0}=t||{};ex.current=new AbortController;let n=(e=>{let t=e.split("?")[0].split("/").pop();return null==t?void 0:t.replace(/\.[^/.]+$/,"")})(e);ep(""),eg("uploading"),eh(r);let i=await (0,x.Vk)({url:e,signal:ex.current.signal,removeBackground:r,skipNameGeneration:a});if(!i){c.toast.error(ea("Component.ImageUploadArea.Toast.UploadFailure")),eg("idle");return}let o=r?i.noBgUrl||e:i.url||e,l=r&&i.noBgId||i.id;ep(o),eg("uploaded"),O({url:o,id:l,name:r?"JUST_REMOVE_BACKGROUND":i.name||n||"image"})},[O,ea]),eI=async e=>{if(!eb)return;e.preventDefault(),es(!1);let t=await (e=>{let t=e.getData("URL"),r=e.items;return t?new Promise(async e=>{for(let t=0;t<r.length;t++){let a=r[t];if("text/html"===a.type){let t=M(await k(a))[0];t&&t.match(/^https?:/)&&e(t)}}e("")}):null})(e.dataTransfer);if(t&&("private"===H||"privateWithGeneratedName"===H))return void ey(t,{skipNameGeneration:"private"===H});ev(e.dataTransfer.files)},{ref:ew,hovered:eD}=C({enabled:eb&&K,processFile:ev,uploadImageByURLAction:ey}),ej=async e=>{ev(e.target.files),e.target.value=""},eL=()=>{if(!ed)return void(0,i.j)();eb&&ec.current.click()},eS=(0,A.useCallback)(()=>{ec.current.value="",null==T||T(),ep(""),eg("idle")},[T]),eP=async e=>{ex.current=new AbortController,eh(!1),ep(""),eg("uploading"),null==N||N({file:e});let t=null,r=e.name||"",a="";if("private"===H){let n=await (0,x.gM)({file:e,signal:ex.current.signal,skipNameGeneration:!0});t=(null==n?void 0:n.id)||null,r=(null==n?void 0:n.name)||"",a=(null==n?void 0:n.url)||""}else if("privateWithGeneratedName"===H){let n=await (0,x.gM)({file:e,signal:ex.current.signal});t=(null==n?void 0:n.id)||null,r=(null==n?void 0:n.name)||"",a=(null==n?void 0:n.url)||""}else if("public"===H){if(!J)throw Error("uploadDirectories is required for public upload");let r=await (0,n.getAccessToken)(),i=await (0,x.E0)(e,J,r,ex.current.signal);a=i||"",t=i}return t?(ep(a||URL.createObjectURL(e)),{id:t,name:r,url:a}):(ex.current.signal.reason||c.toast.error(ea("Component.ImageUploadArea.Toast.UploadFailure")),null)};(0,A.useImperativeHandle)(et,()=>({openFilePicker:()=>{ec.current.click()},setImgSrc:e=>{ep(e),e?eg("uploaded"):eg("idle")},setUploadStatus:e=>{eg(e)},cancelUpload:()=>{"uploading"===em&&(ex.current.abort(),eg("idle"))},uploadImageByURL:ey}),[em,ey]);let{openDialog:e_,dialogComponent:eA}=(0,m.B)();return(0,a.jsx)(u.A,{asChild:!0,title:F,description:Y,disabled:"sm"!==B||!F&&!Y,children:(0,a.jsxs)("div",{ref:ew,className:(0,b.cn)("group/imageInput focus:ring-label-title focus:ring-offset-bg-base relative flex size-full flex-col items-center justify-center rounded-xl border border-dashed leading-normal transition duration-100 ease-out select-none focus:ring-2 focus:ring-offset-2 focus:outline-hidden",{"border-solid":"uploaded"===em&&!el,"hover:bg-bg-base-hover cursor-pointer":eb,"hover:border-bg-border-strong":eb&&"uploaded"!==em,"hover:border-accent-base":eb&&"uploaded"===em,"border-accent-base bg-accent-bg hover:border-accent-base hover:bg-accent-bg":eb&&el,"border-bg-border bg-bg-base":!(eb&&el)},t),tabIndex:0,onMouseDown:e=>e.preventDefault(),onDragEnter:eE,onDragOver:eE,onDragLeave:e=>{eb&&(e.preventDefault(),es(!1))},onDrop:eI,onClick:eL,onKeyDown:e=>{"Enter"===e.key&&eL()},children:[(0,a.jsx)("input",{type:"file",className:"hidden",onChange:ej,ref:ec,accept:V}),"idle"===em&&("sm"===B?(0,a.jsxs)("div",{className:"relative flex shrink-0 grow-0 items-center justify-center gap-2 self-stretch",children:[Z&&(0,a.jsx)(E.A,{className:"text-label-soft size-4",stroke:1.5}),F&&(0,a.jsx)("div",{className:"shrink-0 grow-0 text-center text-xs font-medium text-[#9b9b9b]",children:F})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[Z&&(0,a.jsx)("div",{children:(0,a.jsx)(E.A,{stroke:1.5,className:"size-6 transition duration-100 ease-out ".concat(el?"text-accent-base":"text-label-muted group-hover/imageInput:text-label-title")})}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center empty:hidden",children:[F&&(0,a.jsx)("div",{className:(0,S.A)("px-2 text-center text-xs font-medium transition duration-100 ease-out",{"text-accent-base":el,"text-label-base group-hover/imageInput:text-label-title":!el}),children:F}),Y&&(0,a.jsx)("div",{className:"text-2xs px-2 text-center font-normal whitespace-pre-wrap transition duration-100 ease-out ".concat(el?"".concat(r?"text-accent-base":"text-accent-secondary"):"".concat("text-label-muted")),children:Y})]})]})),"uploading"===em&&(z?(0,a.jsx)("div",{className:"flex items-center justify-center gap-2",children:z}):(0,a.jsxs)("div",{className:(0,S.A)("flex items-center justify-center gap-2",{"flex-row":"sm"===B,"flex-col":"sm"!==B}),children:[(0,a.jsx)(y.A,{stroke:1.5,className:"text-label-muted size-6 animate-spin"}),(0,a.jsx)("div",{className:"text-label-base text-center text-xs font-medium",children:ef?ea("Component.ImageUploadArea.RemovingBackground"):ea("Workspace.AITexturing.Sidebar.Image.Uploading")})]})),"uploaded"===em&&(0,a.jsxs)("div",{className:"relative size-full",children:[(0,a.jsxs)("div",{className:"relative size-full overflow-hidden rounded-xl",children:[eu&&(0,a.jsx)(_.default,{src:eu,alt:"",fill:!0,unoptimized:!0,className:"absolute inset-0 size-full object-contain"},eu),W&&(0,a.jsx)("div",{className:"bg-bg-modal-overlay absolute bottom-0 w-full justify-center",children:(0,a.jsx)("div",{className:"text-2xs text-label-base h-4 text-center",children:W})}),G&&(0,a.jsx)("div",{className:"pointer-events-none absolute inset-0 flex size-full items-center justify-center bg-[rgba(0,0,0,0.5)] opacity-0 transition duration-200 group-hover/imageInput:opacity-100",children:(0,a.jsx)("div",{className:"text-center text-sm font-medium",children:ea("Workspace.TextTo3d.Sidebar.Text.ImageToPrompt.ReUpload")})})]}),(0,a.jsx)("div",{className:"absolute top-2 right-2 z-10 flex gap-2 empty:hidden",onClick:e=>e.stopPropagation(),children:Q&&(0,a.jsx)(o.default,{type:"icon-secondary",size:"xs",icon:(0,a.jsx)(I.A,{stroke:1.5}),onClick:async()=>{ee?ee():e_(eu)},className:"bg-bg-modal-overlay-sub border-none"})}),(0,a.jsxs)("div",{className:"absolute right-2 bottom-2 z-10 flex gap-2 empty:hidden",onClick:e=>e.stopPropagation(),children:[$&&!ef&&(0,a.jsx)(u.A,{title:eo?ea("Component.ImageUploadArea.RemoveBackgroundUpgrade"):ea("Component.ImageUploadArea.RemoveBackground"),asChild:!0,children:(0,a.jsxs)("div",{className:"relative inline-flex",children:[eo&&(er?(0,a.jsx)(d.E,{className:"absolute -top-1 -right-1",hasBackground:!0}):(0,a.jsx)(s.A,{text:"PRO",shape:"jelly-bean",style:"premium",size:"xs",className:"absolute -top-2.5 -right-2.5"})),(0,a.jsx)(o.default,{type:"icon-secondary",size:"xs",icon:(0,a.jsx)(w.A,{stroke:1.5}),onClick:async()=>{if(eo){var e;null==(e=en.current)||e.open({position:"remove_background"})}else await ey(eu,{removeBackground:!0}),null==R||R()}})," "]})}),X&&(0,a.jsx)(a.Fragment,{children:"sm"===B?(0,a.jsx)("button",{onClick:eS,className:"flex size-4 items-center justify-center overflow-visible rounded-lg border border-[#3f3f3f] bg-neutral-800 p-[3px]",children:(0,a.jsx)(D.A,{stroke:1.5,size:8})}):(0,a.jsx)(u.A,{title:ea("Workspace.AITexturing.Sidebar.Image.Remove"),asChild:!0,children:(0,a.jsx)(o.default,{type:"icon-secondary",size:"xs",icon:(0,a.jsx)(j.A,{stroke:1.5}),onClick:eS})})})]}),ef&&(0,a.jsxs)("div",{className:"bg-bg-modal-overlay text-label-base absolute bottom-2 left-2 z-10 flex h-5 max-w-52 items-center gap-1 truncate rounded-xl px-2 text-xs",title:ea("Component.ImageUploadArea.BackgroundRemoved"),children:[(0,a.jsx)(L.A,{stroke:1.5,size:16,className:"flex-none"}),(0,a.jsx)("div",{className:"truncate",children:ea("Component.ImageUploadArea.BackgroundRemoved")})]})]}),(0,a.jsx)("div",{onClick:e=>e.stopPropagation(),children:eA})]})})}},92224:(e,t,r)=>{r.d(t,{AW:()=>n,ZA:()=>a,nJ:()=>i});let a=(e,t)=>{let r=new FileReader;r.onload=r=>{let a=r.target.result;a instanceof ArrayBuffer&&t(a,e.name,(e=>{let t=0;for(;e>1024;)e/=1024,t++;return"".concat(e.toFixed(2)," ").concat(["B","KB","MB","GB","TB"][t])})(e.size))},r.readAsArrayBuffer(e)},n=(e,t)=>{let r=e.lastIndexOf(".");if(r<0)return!1;let a=e.slice(r).toLowerCase();return t.has(a)};function i(e,t){let{accept:r,maxSize:a}=t,n=e.name,i=n.substring(n.lastIndexOf(".")).toLowerCase();return r&&!r.includes(i)?{valid:!1,errorType:"type"}:a&&e.size>1024*a*1024?{valid:!1,errorType:"size"}:{valid:!0}}}}]);