try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b0c28798-a70f-4096-8135-23051cf69e3d",e._sentryDebugIdIdentifier="sentry-dbid-b0c28798-a70f-4096-8135-23051cf69e3d")}()}catch(e){}!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[(new e.Error).stack]=function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];if(null!=a)for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])}return e}({},e._sentryModuleMetadata[(new e.Error).stack],{"_sentryBundlerPluginAppKey:bWVzaHktd2ViYXBwLSMx":!0})}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[231],{21113:(e,t,a)=>{a.d(t,{Y:()=>v});var s=a(95155),l=a(89537),r=a(59634),n=a(52619),i=a.n(n),o=a(12115),c=a(93800),d=a(20651),u=a(957),m=a(54820),h=a(46512);let x=e=>{let{meshStats:t,isLoading:a}=e;if(a)return(0,s.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,s.jsx)(c.A,{})});if(!(null==t?void 0:t.meshEvaluation))return(0,s.jsx)("div",{className:"text-label-soft flex items-center justify-center",children:"No mesh statistics"});let l=Object.entries(t.meshEvaluation);return(0,s.jsx)(d.m,{className:"relative -mr-4 h-full min-w-0 grow overflow-auto pr-4",children:l.map((e,t)=>{let[a,l]=e;return(0,s.jsxs)("div",{children:[t>0&&(0,s.jsx)("hr",{className:"border-bg-border-strong my-8"}),(0,s.jsxs)("h3",{className:"text-label-title mb-4 text-lg font-bold",children:["Mesh Name: ",a]}),Object.entries(l).map((e,t)=>{var a,l,r,n,i,o,c,d,u;let[m,h]=e;return(0,s.jsxs)("div",{className:"mb-6",children:[t>0&&(0,s.jsx)("hr",{className:"border-bg-border my-4"}),(0,s.jsxs)("h4",{className:"text-label-base mb-3 text-sm font-bold",children:[m,(((null==(a=h[0])?void 0:a.totalElements)||0)>0||((null==(l=h[0])?void 0:l.totalArea)||0)>0)&&(0,s.jsxs)(s.Fragment,{children:[" ","(",((null==(r=h[0])?void 0:r.totalElements)||0)>0&&"Total: ".concat(null==(n=h[0])?void 0:n.totalElements),((null==(i=h[0])?void 0:i.totalElements)||0)>0&&((null==(o=h[0])?void 0:o.totalArea)||0)>0&&", ",((null==(c=h[0])?void 0:c.totalArea)||0)>0&&"Area: ".concat(null==(u=h[0])||null==(d=u.totalArea)?void 0:d.toFixed(2)),")"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(200px,1fr))] gap-4",children:h.map((e,t)=>{let a=((e,t)=>!t||t<=0?null:(e/t*100).toFixed(2))(e.value||0,e.totalElements),l=((e,t)=>!t||t<=0?null:(e/(null!=t?t:1)*100).toFixed(2))(e.totalInvalidArea||0,e.totalArea);return(0,s.jsxs)("div",{className:"border-bg-border min-w-0 border-l-2 pl-3",children:[(0,s.jsxs)("div",{className:"text-label-title mb-1 text-xs font-bold whitespace-nowrap",children:[(0,s.jsxs)("p",{children:[e.name,":"," ",Number.isInteger(e.value)?e.value:e.value.toFixed(2)]}),a&&(0,s.jsxs)("p",{children:["(",a,"% by count)"]}),l&&(0,s.jsxs)("p",{children:["(",l,"% by area)"]}),void 0!==e.threshold&&null!==e.threshold&&e.threshold>0&&(0,s.jsxs)("p",{className:"text-label-soft font-normal",children:["Threshold: ",e.threshold]})]}),(0,s.jsx)("div",{className:"text-label-soft mb-2 text-xs break-words",children:e.description})]},t)})})]},m)})]},a)})})};function p(e){let{taskId:t}=e,[a,l]=(0,o.useState)(!1),{data:r,isLoading:n}=(0,h.Ay)(a?"mesh-stats-".concat(t):null,()=>(0,m.Vu)(t||""));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"hover:text-semantic-info-highlight cursor-pointer hover:underline",onClick:()=>{l(!0)},children:"Mesh Stats"}),(0,s.jsx)(u.a,{topPosition:100,leftPosition:1500,dialogOpen:a,setDialogOpen:l,headers:(0,s.jsx)("div",{className:"flex gap-1.5",children:"Mesh Statistics"}),resizable:!0,defaultWidth:900,defaultHeight:760,limits:{minWidth:600,minHeight:400},children:(0,s.jsx)("div",{className:"relative size-full overflow-auto p-4 select-text",children:(0,s.jsx)(x,{meshStats:r,isLoading:n})})})]})}let g=e=>{var t,a,r,n,i,o;let{taskId:c}=e,{data:d}=(0,l.ZE)(c||null),u=[];return(null==d?void 0:d.phase)==="draft"&&(u=(null==(r=d.result)||null==(a=r.draft)||null==(t=a.frames)?void 0:t.map(e=>e.id))||[]),(null==d?void 0:d.phase)==="text-to-image"&&(u=(null==(o=d.result)||null==(i=o.textToImage)||null==(n=i.images)?void 0:n.map(e=>{let t=e.imageId.match(/_(\d)\./);return(null==t?void 0:t[1])||""}))||[]),(0,s.jsx)("div",{className:"grid grid-cols-2",children:u.map((e,t)=>(0,s.jsx)("div",{className:"border-bg-border -mt-px -ml-px flex size-5 items-center justify-center border",children:e},"".concat(e,"-").concat(t)))})},v=e=>{let{taskId:t,showGrid:a=!1}=e,l=(0,r.useGateValue)("internal_users"),[n,c]=(0,o.useState)(!1),d=new URL("https://api.meshy.ai/web").hostname;return((0,o.useEffect)(()=>{c(!0)},[]),n&&l)?(0,s.jsxs)("div",{className:"border-bg-border text-label-soft mt-4 flex items-center gap-4 border-t pt-4 text-xs",children:[(0,s.jsx)("div",{children:"\uD83D\uDEE0️ Debug Info"}),a&&(0,s.jsx)(g,{taskId:t}),(0,s.jsxs)("ul",{className:"flex list-outside list-disc gap-4",children:[(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:"https://".concat(d,"/misc/tasks/").concat(t,"/args"),target:"_blank",className:"hover:text-semantic-info-highlight hover:underline",children:"任务参数"})}),(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:"https://".concat(d,"/misc/tasks/").concat(t,"/dir"),target:"_blank",className:"hover:text-semantic-info-highlight hover:underline",children:"中间结果"})}),(0,s.jsx)("li",{children:(0,s.jsx)(i(),{href:"https://".concat(d,"/misc/tasks/").concat(t,"/traces"),target:"_blank",className:"hover:text-semantic-info-highlight hover:underline",children:"任务中间步骤耗时"})}),(0,s.jsx)("li",{children:(0,s.jsx)(p,{taskId:t})})]})]}):null}},35717:(e,t,a)=>{a.d(t,{$:()=>l,k:()=>s});let s=/^[a-zA-Z0-9_-]{4,32}$/,l="https://cdn.meshy.ai/webapp-assets/community/profile-background.png"},39936:(e,t,a)=>{a.d(t,{M:()=>n});var s=a(75731),l=a(89863);let r={currentWorkspaceId:null},n=(0,s.vt)()((0,l.Zr)(e=>({...r,setCurrentWorkspaceId:t=>e({currentWorkspaceId:t}),reset:()=>{e({...r})}}),{name:"meshy-shared-workspace"}))},43610:(e,t,a)=>{a.d(t,{gg:()=>h,P5:()=>d,Kz:()=>x});var s=a(76433);let l=[{label:"GPT-Image",value:"gpt-image-1",resolutions:[{label:"1024x1024 (1:1)",value:"1024x1024"},{label:"1536x1024 (3:2)",value:"1536x1024"},{label:"1024x1536 (2:3)",value:"1024x1536"}]},{label:"Flux-pro",value:"fal-ai/flux-pro/v1/depth",resolutions:[{label:"1880x1057 (16:9)",value:"1880x1057"},{label:"1280x720 (16:9)",value:"1280x720"},{label:"1000x1000 (1:1)",value:"1000x1000"}]}],r=[{label:"Kling 2.1",value:"fal-ai/kling-video/v2.1/pro/image-to-video"}];var n=a(99290),i=a(58526),o=a(16680),c=a(54172);let d=e=>{let{taskId:t,type:a,secret:s,isPublic:l=!0}=e,r="";switch(a){case"V1":r="/public/tasks/".concat(t);break;case"V1_ANIMATION":r="/public/animations/".concat(t);break;case"V2":r=l?"/public/v2/tasks/".concat(t):"/v2/tasks/".concat(t);break;default:throw new n.Cf("Invalid task version",400)}return{url:r,params:{secret:s}}},u=(e,t)=>{switch(e){case o.JW.CC_ZERO:return"CC0";case o.JW.CC_BY_FOUR:return"CC BY 4.0";case o.JW.PRIVATE:return t("Workspace.ImageTo3d.Sidebar.License.Private");default:return""}},m=async(e,t)=>{var a;let l=e.taskJson.objectPrompt||"",r=(e.taskJson.mode===o.nN.ImageTo3D&&e.taskJson.imageUrls?e.taskJson.imageUrls[0]:"")||"",n=e.taskJson.seed&&0!==e.taskJson.seed?String(e.taskJson.seed):"",i=e.userId||"",d=await (0,c.yQ)(i,!1),m=e.taskJson.previewUrl||"",h=e.taskJson.previewLogoUrl||m;return{title:e.taskJson.objectPrompt||e.taskJson.name||"",taskId:e.id,showcaseId:e.showcaseId||"",userId:i||"",aiModel:(0,s.k)(e.taskJson.aiModel||o.jZ.Meshy3),license:u(e.taskJson.license,t),previewImage:m,previewLogoImage:h,author:(null==d||null==(a=d.result)?void 0:a.nickname)||"",workspaceId:"",addedAt:0,status:"SUCCEEDED",phase:"generate",mode:"generate",modelPrompt:l,modelImages:r?[r]:[],modelSeed:n,modelImageName:e.taskJson.name,modelUrl:"",texturePrompt:l,textureImage:r,textureSeed:n,sceneImages:[],scenePrompt:"",sceneResult:[],videoParams:{aiModel:"",aspectRatio:"",duration:0,imageId:"",imageUrl:"",prompt:""},videoResult:{videoId:"",videoUrl:""}}},h=async e=>{let t,{url:a,type:c,params:d,t:h,isPublic:x=!0}=e;if(x){let e=await fetch(((e,t)=>{let a=new URL(e);return Object.entries(t).forEach(e=>{let[t,s]=e;void 0!==s&&a.searchParams.set(t,String(s))}),a.toString()})("".concat("https://api.meshy.ai/web").concat(a),d),{headers:{},next:{revalidate:86400}});if(200!==e.status)throw new n.Cf(e.statusText,e.status);t=(await e.json()).result}else{var p;let e=await (0,o.MA)({url:"".concat("https://api.meshy.ai/web").concat(a),method:"GET",needsToken:!0});if(!e)throw new n.Cf("Failed to get task",500);t=null==e||null==(p=e.data)?void 0:p.result}switch(c){case"V1":return((e,t)=>{var a,l,r,n;let i=e.objectPrompt||"",c=(e.mode===o.nN.ImageTo3D&&e.imageUrls?e.imageUrls[0]:"")||"",d=e.seed&&0!==e.seed?String(e.seed):"",m=(null==(a=e.result)?void 0:a.previewUrl)||"",h=(null==(l=e.result)?void 0:l.previewLogoUrl)||m;return{title:e.objectPrompt||e.name||"",taskId:e.id,showcaseId:e.showcaseId||"",userId:e.userId||"",aiModel:(0,s.k)(e.aiModel||o.jZ.Meshy3),license:u(e.license,t),previewImage:m,previewLogoImage:h,author:(null==(r=e.author)?void 0:r.nickname)||"",workspaceId:"",addedAt:0,status:e.status,phase:"generate",mode:"generate",modelPrompt:i,modelImages:c?[c]:[],modelSeed:d,modelImageName:e.name,modelUrl:(null==(n=e.result)?void 0:n.modelUrl)||"",texturePrompt:i,textureImage:c,textureSeed:d,sceneImages:[],scenePrompt:"",sceneResult:[],videoParams:{aiModel:"",aspectRatio:"",duration:0,imageId:"",imageUrl:"",prompt:""},videoResult:{videoId:"",videoUrl:""}}})(t,h);case"V1_ANIMATION":return await m(t,h);case"V2":return((e,t)=>{var a,n,o,c,d,m,h,x,p,g,v,f,b,j,y,w,k,N,I,C,M,A,S,E,T,P,R,z,D,U,F,W,O,_,V,L,B,H,K,J,G,Z,Y,$,Q,q,X,ee,et,ea,es,el,er,en,ei,eo,ec,ed,eu,em,eh,ex,ep,eg,ev,ef,eb;let ej=!!(null==(n=e.args)||null==(a=n.draft)?void 0:a.imageId),ey=(null==(c=e.args)||null==(o=c.draft)?void 0:o.prompt)||"",ew=(null==(m=e.args)||null==(d=m.draft)?void 0:d.imageUrl)||"",ek=(0,i.A)((null==(x=e.args)||null==(h=x.draft)?void 0:h.imageUrls)||[ew]).filter(Boolean),eN=null==e?void 0:e.phase,eI="";switch(eN){case"generate":eI=(null==e||null==($=e.result)||null==(Y=$.generate)?void 0:Y.modelUrl)||"";break;case"texture":eI=(null==e||null==(q=e.result)||null==(Q=q.texture)?void 0:Q.modelUrl)||"";break;case"stylize":eI=(null==e||null==(ee=e.result)||null==(X=ee.stylize)?void 0:X.modelUrl)||"";break;case"animate":eI=(null==e||null==(el=e.result)||null==(es=el.animate)||null==(ea=es.actions)||null==(et=ea[0])?void 0:et.animationGlbUrl)||""}let eC="",eM="";switch(eN){case"3d-to-image":eC=(null==e||null==(eo=e.result)||null==(ei=eo.threeDToImage)||null==(en=ei.images)||null==(er=en[0])?void 0:er.imageUrl)||"",eM=(null==(ec=l.find(t=>{var a,s;return t.value===(null==(s=e.args)||null==(a=s.threeDToImage)?void 0:a.aiModel)}))?void 0:ec.label)||"";break;case"video":eC=(null==e||null==(eu=e.args)||null==(ed=eu.video)?void 0:ed.imageUrl)||"",eM=(null==(em=r.find(t=>{var a,s;return t.value===(null==(s=e.args)||null==(a=s.video)?void 0:a.aiModel)}))?void 0:em.label)||"";break;default:eC=(null==e||null==(eh=e.result)?void 0:eh.previewUrl)||"",eM=(0,s.d)(null==(ep=e.args)||null==(ex=ep.draft)?void 0:ex.aiModel,null==(ev=e.args)||null==(eg=ev.texture)?void 0:eg.aiModel,t)}let eA=(null==(p=e.result)?void 0:p.previewLogoUrl)||eC;return{title:ey,aiModel:eM,license:u(e.license,t),previewImage:eC,previewLogoImage:eA,author:(null==(g=e.author)?void 0:g.nickname)||"",addedAt:e.addedAt||0,status:e.status,phase:e.phase,mode:e.mode,taskId:e.id,showcaseId:e.showcaseId||"",userId:e.userId||"",workspaceId:e.workspaceId||"",modelPrompt:ej?"":ey,modelImageName:ej?ey:"",modelImages:ek,modelSeed:String((null==(f=e.args)||null==(v=f.draft)?void 0:v.seed)||""),modelUrl:eI,texturePrompt:(null==(j=e.args)||null==(b=j.texture)?void 0:b.prompt)||"",textureImage:(null==(w=e.args)||null==(y=w.texture)?void 0:y.imageId)&&(null==(N=e.args)||null==(k=N.texture)?void 0:k.imageUrl)||"",textureSeed:String(null!=(ef=null==(C=e.args)||null==(I=C.texture)?void 0:I.seed)?ef:""),sceneImages:(null==(A=e.args)||null==(M=A.threeDToImage)?void 0:M.imageUrls)||[],scenePrompt:(null==(E=e.args)||null==(S=E.threeDToImage)?void 0:S.prompt)||"",sceneResult:null!=(eb=null==(P=e.result)||null==(T=P.threeDToImage)?void 0:T.images)?eb:[],videoParams:{aiModel:(null==(z=e.args)||null==(R=z.video)?void 0:R.aiModel)||"",aspectRatio:(null==(U=e.args)||null==(D=U.video)?void 0:D.aspectRatio)||"",duration:(null==(W=e.args)||null==(F=W.video)?void 0:F.duration)||0,imageId:(null==(_=e.args)||null==(O=_.video)?void 0:O.imageId)||"",imageUrl:(null==(L=e.args)||null==(V=L.video)?void 0:V.imageUrl)||"",prompt:(null==(H=e.args)||null==(B=H.video)?void 0:B.prompt)||""},videoResult:{videoId:(null==(J=e.result)||null==(K=J.video)?void 0:K.videoId)||"",videoUrl:(null==(Z=e.result)||null==(G=Z.video)?void 0:G.videoUrl)||""}}})(t,h);default:throw new n.Cf("Invalid task version",400)}},x=(e,t)=>e?"V2":t?"V1_ANIMATION":"V1"},46857:(e,t,a)=>{a.d(t,{B:()=>tf,n:()=>tb});var s,l,r,n,i=a(95155),o=a(61691),c=a(89068),d=a(21134),u=a(21113),m=a(55499),h=a(66599),x=a(18955),p=a(12115),g=a(74765),v=a(85072),f=a(22317),b=a(16680),j=a(67016);let y=(e,t)=>(a,s)=>s&&!s.hasNext?null:{url:e?"".concat("https://api.meshy.ai/web","/public/showcases/").concat(e,"/comments"):"".concat("https://api.meshy.ai/web","/v2/tasks/").concat(t,"/comments"),lastIndex:null==s?void 0:s.lastIndex};var w=a(44824),k=a(20063),N=a(19554),I=a(19954),C=a(20701),M=a(95387),A=a(42047),S=a(52787),E=a(8952),T=a(88378),P=a(55247),R=a(60013),z=a(880);let D=e=>(t,a)=>(0,R.jM)(a,t=>{null==t||t.forEach(t=>{t.list=t.list.filter(t=>t.id!==e)})}),U=e=>{let{showcaseId:t}=e,{mutate:a}=(0,o.Bw)(t);return()=>a(e=>(0,R.jM)(e,e=>{e&&(e.comments=e.comments-1)}),{revalidate:!1})},F=(e,t)=>(0,R.jM)(e,e=>{e.forEach(e=>{e.list.forEach(e=>{e.id===t.commentId&&(e.myReactions[t.emoji]=Date.now(),e.reactions[t.emoji]=e.reactions[t.emoji]+1)})})});var W=a(99290),O=a(90433),_=a(48239),V=a(85526),L=a(89710),B=a(73588),H=a(61456),K=a(59962),J=a(8667),G=a(52619),Z=a.n(G),Y=a(49059);let $=e=>{let{attributes:t,children:a}=e;return(0,i.jsx)("span",{...t,children:a})},Q=e=>{let{attributes:t,children:a}=e;return(0,i.jsx)("p",{...t,children:a})},q=e=>{let{attributes:t,children:a}=e;return(0,i.jsx)("span",{...t,style:{...t.style,top:8},children:a})},X=e=>{let{editor:t,initialValue:a,placeholder:s,readOnly:l=!1,onChange:r,onKeyDown:n,onFocus:o,onBlur:c,renderElement:d,renderLeaf:u,renderPlaceholder:m,className:x,editableRef:g,children:v}=e,f=(0,p.useCallback)(e=>(0,i.jsx)(Q,{...e}),[]),b=(0,p.useCallback)(e=>(0,i.jsx)($,{...e}),[]),j=(0,p.useCallback)(e=>(0,i.jsx)(q,{...e}),[]),y=a&&a.length>0?a:[{type:"paragraph",children:[{text:""}]}];return(0,i.jsxs)(Y.A,{editor:t,initialValue:y,onChange:r,children:[(0,i.jsx)(Y.Fo,{readOnly:l,disableDefaultStyles:!0,ref:g,renderPlaceholder:m||j,renderElement:d||f,renderLeaf:u||b,onKeyDown:n,onFocus:o,onBlur:c,placeholder:s,className:(0,h.cn)("caret-semantic-info-base relative border-hidden whitespace-pre-wrap focus:outline-hidden",x)}),v]})};var ee=a(46287),et=a(63941),ea=a(654);let es=()=>{let e=(0,ea.c3)(),t=e=>{if(et.EY.isText(e))return e.text;let a=e.children.map(e=>t(e)).join("");switch(e.type){case"mention":return"@(".concat(e.id,")");case"paragraph":return a+"\n";default:return a}};return{deserialize:(0,p.useCallback)(async t=>{let a,s=t.split("\n"),l=/@\((.+?)\)/g,r=[],n=new Set;for(;null!==(a=l.exec(t));)n.add(a[1]);let i=[];n.forEach(e=>{i.push((0,ee.yQ)(e,!1))});let o=await Promise.all(i),c=new Map;for(let t of(o.forEach(e=>{c.set(null==e?void 0:e.result.userId,null==e?void 0:e.result.nickname)}),s)){let a,s=[],n=0;for(;null!==(a=l.exec(t));){var d;let[l,r=""]=a;if(a.index>n){let e=t.substring(n,a.index);s.push({text:e})}let i=null!=(d=c.get(r))?d:e("Comment.UnknownUser");s.push({type:"mention",id:r,nickname:i,children:[{text:"@".concat(i)}]}),n=a.index+l.length}if(n<t.length){let e=t.substring(n);s.push({text:e})}r.push({type:"paragraph",children:s.length>0?s:[{text:""}]})}return r},[e]),serialize:e=>e.map(e=>et.bP.string(e)).join(""),serializeEditorToPlainText:e=>e.children.map(t).join("")}},el=e=>{let{attributes:t,children:a,element:s,isQuoteMention:l}=e;return(0,i.jsx)("span",{...t,contentEditable:!1,"data-cy":"mention-".concat(s.id.replace(" ","-")),style:{verticalAlign:"baseline",display:"inline-block"},className:"inline-block text-sm/5 focus:outline-hidden",children:(0,i.jsx)("span",{contentEditable:!1,children:l?(0,i.jsx)("span",{className:"text-label-muted text-xs",children:"@".concat(s.nickname," ")}):(0,i.jsx)(N.P,{userId:s.id,className:"z-50",children:(0,i.jsx)("span",{className:"text-semantic-info-highlight cursor-pointer",children:"@".concat(s.nickname," ")})})})})};function er(){let{maxMentions:e=10}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,x.c3)();return(0,p.useCallback)(a=>{let{isInline:s,isVoid:l,markableVoid:r,insertData:n}=a;return a.isInline=e=>"mention"===e.type||s(e),a.isVoid=e=>"mention"===e.type||l(e),a.markableVoid=e=>"mention"===e.type||r(e),a.insertData=s=>{let l=s.getData("text/plain");if(l&&Array.from(et.KE.nodes(a,{at:[],match:e=>et.Hg.isElement(e)&&"mention"===e.type})).length+(l.match(/@\w+/g)||[]).length>e)return void z.toast.error(t("Component.CustomRichTextEditor.Mention.MaxLength"));n(s)},a},[e,t])}var en=a(32513),ei=a(16424),eo=a(96421),ec=a(21166),ed=a(93800),eu=a(5129);let em=(0,p.forwardRef)((e,t)=>{let{label:a,icon:s,iconSuffix:l,suffix:r,keyboardShortcut:n,className:o,disabled:c=!1,destructive:d=!1,size:u="md",onClick:m}=e;return(0,i.jsxs)("div",{ref:t,onMouseDown:e=>e.preventDefault(),onMouseEnter:e=>e.preventDefault(),className:(0,h.cn)("group/item bg-bg-sub flex w-full cursor-pointer items-center justify-between transition duration-100 ease-out select-none focus:outline-hidden",{"h-10 gap-2 rounded-md px-3 text-base":"lg"===u||"md"===u,"h-8 gap-2 rounded-md px-3 text-sm":"sm"===u||"xs"===u,"cursor-default opacity-40":c,"active:opacity-70":!c},{"hover:bg-bg-shade focus:bg-bg-shade":!d&&!c,"hover:bg-semantic-error-bg focus:bg-semantic-error-bg":d&&!c},o),onClick:m,children:[(0,i.jsxs)("div",{className:(0,h.cn)("flex min-w-0 grow items-center",{"gap-2":"lg"===u||"md"===u,"gap-1.5":"sm"===u||"xs"===u}),children:[s&&(0,i.jsx)("div",{className:(0,h.cn)("text-label-muted flex items-center justify-center stroke-[1.5px] transition duration-100 ease-out",{"h-6 w-6":"lg"===u||"md"===u,"h-5 w-5":"sm"===u||"xs"===u,"group-hover/item:text-label-title":!c,"text-semantic-error-base group-hover/item:text-semantic-error-base":d&&!c}),children:s}),(0,i.jsx)("span",{className:(0,h.cn)("text-label-base min-w-0 text-left font-normal transition duration-100 ease-out",{"text-base":"lg"===u||"md"===u,"text-sm":"sm"===u||"xs"===u,"group-hover/item:text-label-title":!c,"text-semantic-error-base group-hover/item:text-semantic-error-base":d&&!c}),children:a})]}),(0,i.jsxs)("div",{className:(0,h.cn)("flex items-center empty:hidden",{"gap-2":"lg"===u||"md"===u,"gap-1.5":"sm"===u||"xs"===u}),children:[n&&(0,i.jsx)("div",{className:(0,h.cn)("text-label-muted flex items-center justify-center gap-[2px] text-center font-normal transition duration-100 ease-out",{"text-sm":"lg"===u||"md"===u,"text-xs":"sm"===u||"xs"===u}),children:n.map((e,t)=>(0,i.jsx)("span",{children:e},t))}),l&&(0,i.jsx)("div",{className:(0,h.cn)("text-label-faint flex flex-none items-center justify-center stroke-[1.5px] transition duration-100 ease-out",{"h-6 w-6":"lg"===u||"md"===u,"h-5 w-5":"sm"===u||"xs"===u,"group-hover/item:text-label-base":!c,"text-semantic-error-base group-hover/item:text-semantic-error-base":d&&!c}),children:l}),r&&(0,i.jsx)(i.Fragment,{children:r})]})]})});em.displayName="MenuItem";let eh=e=>{let{mentions:t,setTarget:a,index:s,target:l,insertMention:r,isLoading:n,isLoadingNextPage:o,hasMore:c,onLoadMore:d}=e,u=(0,Y.Zi)(),m=(0,x.c3)(),g=(0,p.useRef)(null),[v,f]=(0,p.useState)(null),b=t&&t.length>0,{refs:j,floatingStyles:y,context:w}=(0,ei.we)({open:!!l,placement:"bottom-start",middleware:[(0,eo.cY)(e=>{let{placement:t}=e;return t.startsWith("top")?20:8}),(0,eo.UU)(),(0,eo.BN)({padding:16})],whileElementsMounted:ec.ll}),k=(0,ei.s9)(w,{outsidePress:!0,escapeKey:!0}),N=(0,ei.It)(w,{role:"listbox"}),{getFloatingProps:C}=(0,ei.bv)([k,N]);return(0,p.useEffect)(()=>{if(l)try{let e=Y.rL.toDOMRange(u,l).getBoundingClientRect(),t={getBoundingClientRect:()=>({x:e.left,y:e.bottom,top:e.bottom,left:e.left,bottom:e.bottom,right:e.right,width:e.width,height:0})};f(t),j.setReference(t)}catch(e){console.error("Failed to resolve DOM range from Slate point:",e),a(null)}else f(null)},[u,l,j,a]),(0,p.useEffect)(()=>{let e=g.current;if(!e||!c||o)return;let t=new IntersectionObserver(e=>{let t=e[0];(null==t?void 0:t.isIntersecting)&&c&&!o&&(null==d||d())});return t.observe(e),()=>{t.disconnect()}},[d,c,o]),(0,i.jsx)(i.Fragment,{children:l&&v&&(0,i.jsx)(ei.XF,{children:(0,i.jsx)("div",{ref:j.setFloating,style:y,...C(),"data-cy":"mentions-portal",className:"z-[1001]",children:(0,i.jsx)(eu.F,{className:"bg-bg-sub border-bg-border h-[236px] w-64 rounded-lg border-[0.5px] shadow-lg",children:(0,i.jsx)(eu.B,{children:(0,i.jsxs)("div",{className:"flex flex-col gap-[6px] p-[6px]",children:[!b&&(0,i.jsx)("div",{className:"flex h-[222px] w-full items-center justify-center",children:n?(0,i.jsx)(ed.A,{type:"spinner"}):(0,i.jsx)("span",{className:"text-label-muted text-sm",children:m("Component.CustomRichTextEditor.Mention.NoResults")})}),b&&t.map((e,t)=>(0,i.jsx)("div",{children:(0,i.jsx)(em,{size:"lg",className:(0,h.cn)("flex items-center justify-between rounded-md px-4 py-2",s===t&&"bg-bg-shade"),icon:(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(I.A,{size:"xs",alt:e.nickname,src:e.avatarUrl}),(0,i.jsx)(P.w,{size:"xs",tier:e.tier})]})}),label:(0,i.jsx)("div",{className:"h-auto",children:e.nickname}),onClick:()=>{et.gB.select(u,l),r({id:e.userId,nickname:e.nickname}),a(null)}})},e.userId)),c&&(0,i.jsxs)(i.Fragment,{children:[c&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(ed.A,{type:"spinner"})}),(0,i.jsx)("div",{ref:g})]})]})})})})})})};var ex=a(58919);let ep=e=>{let{content:t,placeholder:a,className:s,isQuoteMention:l=!1,editableRef:r}=e,{deserialize:n}=es(),o=er(),c=(0,p.useRef)(null),d=(0,p.useMemo)(()=>{var e,t;let a=o((0,Y.o$)((0,ex.$k)((0,et.ie)())));return a.children=null!=(t=null==(e=c.current)?void 0:e.children)?t:[{type:"paragraph",children:[{text:""}]}],c.current=a,a},[o]);return(0,p.useEffect)(()=>{t&&n(t).then(e=>{d.children=e,et.KE.normalize(d,{force:!0})})},[n,t,d]),(0,i.jsx)(X,{editor:d,placeholder:a,readOnly:!0,className:s,editableRef:r,renderElement:e=>"mention"===e.element.type?(0,i.jsx)(el,{...e,isQuoteMention:l}):(0,i.jsx)("p",{...e.attributes,children:e.children}),renderPlaceholder:e=>(0,i.jsx)("span",{...e.attributes,children:e.children}),onChange:()=>{},onKeyDown:()=>{},onFocus:()=>{}})},eg=e=>{let{content:t,nickname:a,icon:s,className:l}=e,r=(0,x.c3)();return(0,i.jsxs)("div",{className:(0,h.cn)("bg-bg-base-hover text-label-muted flex h-8 items-center ps-2 pe-1 text-xs",l),children:[(0,i.jsx)(_.A,{size:16,stroke:1.5,className:"inline-block flex-none -scale-x-100"}),(0,i.jsx)("div",{className:"ms-1 me-[14px] flex-1 truncate",children:(0,i.jsx)(ep,{placeholder:r("Workspace.Comment.Loading.Comment"),content:"".concat(a,": ").concat(t.replaceAll("\n","")),isQuoteMention:!0,className:"text-label-muted! ms-1 me-[14px] truncate!"})}),t&&s]})},ev=e=>{var t;let{comment:a,showcaseId:s,taskId:l,workspaceId:r,border:n,highlight:o,onReply:c,onSearch:d,ref:u}=e,m=(0,O.ge)(),f=(0,x.c3)(),{myInfo:b}=(0,E.Iy)(),w=(e=>{let{showcaseId:t}=e,a=(0,x.c3)(),s=U({showcaseId:t}),l=(0,v.t)(e=>({url:"/v1/showcases/".concat(t,"/comments/").concat(e),method:"DELETE",needsToken:!0}),{key:(0,j.WI)(y(t,"")),onSuccess:()=>{z.toast.success(a("Workspace.Comment.DeleteSuccess")),t&&s()},revalidate:!1}),r=l.trigger;return l.trigger=(e,t)=>r(e,{populateCache:D(e),...t}),l})({showcaseId:s}),k=(()=>{let e=(0,x.c3)();return(0,v.t)(function(){let{reason:e,commentId:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{reason:"",commentId:""};return{url:"/v1/surveys",method:"POST",data:{result:{reason:e,commentId:t},key:"meshy:report:comment"},transformResponse:()=>({code:W.I.OK,result:{}}),needsToken:!0}},{onSuccess:()=>{z.toast.success(e("Workspace.Comment.ReportSuccess"))}})})(),G=(e=>{let{showcaseId:t,taskId:a}=e,s=U({showcaseId:t}),l=(0,v.t)(function(){let{commentId:e,emoji:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{commentId:"",emoji:"heart"};return{url:t?"/v1/showcases/".concat(t,"/comments/").concat(e,"/reaction"):"/v2/tasks/".concat(a,"/comments/").concat(e,"/reaction"),method:"POST",needsToken:!0,data:{emoji:s}}},{key:(0,j.WI)(y(t,a)),revalidate:!1,onSuccess:e=>{e.deleted&&t&&s()}}),r=l.trigger;return l.trigger=(e,t)=>r(e,{optimisticData:t=>F(t,e),populateCache:(t,a)=>(null==t?void 0:t.deleted)?D(e.commentId)(t,a):a?F(a,e):void 0,revalidate:!1,...t}),l})({showcaseId:s,taskId:l}),Y=(e=>{let{showcaseId:t,taskId:a}=e,s=(0,v.t)(function(){let{commentId:e,emoji:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{commentId:"",emoji:"heart"};return{url:t?"/v1/showcases/".concat(t,"/comments/").concat(e,"/reaction"):"/v2/tasks/".concat(a,"/comments/").concat(e,"/reaction"),method:"DELETE",needsToken:!0,data:{emoji:s}}},{key:(0,j.WI)(y(t,a)),revalidate:!1}),l=s.trigger;return s.trigger=(e,t)=>l(e,{optimisticData:t=>(0,R.jM)(t,t=>{null==t||t.forEach(t=>{t.list.forEach(t=>{t.id===e.commentId&&(t.myReactions[e.emoji]=null,t.reactions[e.emoji]=t.reactions[e.emoji]-1)})})}),...t}),s})({showcaseId:s,taskId:l}),[$,Q]=(0,p.useState)(!1),[q,X]=(0,p.useState)(!1),[ee,et]=(0,p.useState)(),ea=(null==b?void 0:b.userId)===decodeURIComponent(a.author.id),es=!!(null==(t=a.myReactions)?void 0:t.heart),el=a.replyTo,er=a.createdAt<0x199143b2de6;return(0,i.jsxs)("div",{ref:u,className:"flex gap-3",id:a.id,children:[(0,i.jsxs)(Z(),{href:m("/@".concat(a.author.uid)),target:"_blank",className:"relative",children:[(0,i.jsx)(I.A,{size:"sm",alt:a.author.nickname||"",src:a.author.avatarUrl||""}),(0,i.jsx)(P.w,{size:"md",tier:a.author.tier})]}),(0,i.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,i.jsxs)("div",{className:"flex h-6 items-center",children:[(0,i.jsxs)("div",{className:"text-label-title flex-1 text-xs font-medium",children:[(0,i.jsx)(Z(),{href:m("/@".concat(a.author.uid)),target:"_blank",children:a.author.nickname}),(0,i.jsx)(T.s,{className:"text-label-muted ml-1 font-normal",timestamp:a.createdAt})]}),(0,i.jsxs)("div",{className:"flex flex-none gap-1",children:[(0,i.jsx)(g.default,{type:"tertiary",size:"xs",icon:(0,i.jsx)(_.A,{size:16,stroke:1.5}),onClick:c,children:f("Workspace.Comment.Reply")}),(0,i.jsx)(g.default,{type:a.reactions.heart?"tertiary":"icon-tertiary",size:"xs",icon:es?(0,i.jsx)(V.A,{size:16,stroke:1.5,className:"text-semantic-error-base"}):(0,i.jsx)(L.A,{size:16,stroke:1.5}),onClick:()=>{Y.isMutating||G.isMutating||(es?Y.trigger({commentId:a.id,emoji:"heart"}):G.trigger({commentId:a.id,emoji:"heart"}))},children:a.reactions.heart}),!r&&(0,i.jsx)(M.rI,{size:"xs",trigger:(0,i.jsx)(g.default,{type:"icon-tertiary",size:"xs",icon:(0,i.jsx)(B.A,{size:16,stroke:1.5})}),children:ea?(0,i.jsx)(M._2,{size:"md",destructive:!0,label:f("Workspace.Comment.Delete"),icon:(0,i.jsx)(H.A,{size:16,stroke:1.5}),onSelect:()=>Q(!0),className:"text-sm"}):(0,i.jsx)(M._2,{size:"md",label:f("Workspace.Comment.Report"),icon:(0,i.jsx)(K.A,{size:16,stroke:1.5}),className:"text-sm",onSelect:()=>X(!0)})})]})]}),el&&(0,i.jsx)(eg,{className:"mt-2 rounded-lg",content:el.content,nickname:el.author.nickname,icon:(0,i.jsx)(S.A,{title:f("Workspace.Comment.ViewOriginal"),asChild:!0,children:(0,i.jsx)(g.default,{type:"icon-tertiary",icon:(0,i.jsx)(J.A,{size:16,stroke:1.5}),className:"flex-none",size:"xs",onClick:()=>null==d?void 0:d(el.id)})})}),er?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:(0,h.cn)("mt-2 text-xs/4 break-words whitespace-pre-wrap",o&&"text-accent-base"),children:[el&&(0,i.jsx)(N.P,{userId:el.author.id,className:"z-50",children:(0,i.jsx)("span",{className:"text-semantic-info-highlight cursor-pointer",children:"@".concat(el.author.nickname," ")})}),a.content]})}):(0,i.jsx)("div",{className:(0,h.cn)("whitespace-pre-wra! mt-2 text-xs/4 break-words"),children:(0,i.jsx)(ep,{placeholder:f("Workspace.Comment.Loading.Comment"),content:a.content,className:(0,h.cn)(o&&"text-accent-base")})}),n&&(0,i.jsx)("div",{className:"bg-bg-border mt-5 h-px w-full"})]}),(0,i.jsx)(C.Ay,{type:"destructive",open:$,onOpenChange:Q,title:f("Workspace.Comment.DeleteDialogTitle"),description:f("Workspace.Comment.DeleteDialogDescription"),submitText:f("Workspace.Comment.DeleteDialogSubmitText"),onSubmit:async()=>{await w.trigger(a.id)}}),(0,i.jsx)(C.Ay,{open:q,onOpenChange:X,title:f("Dashboard.Discover.CommunityShowcase.Report.Title"),onSubmit:async()=>{await k.trigger({reason:ee||"",commentId:a.id})},submitText:f("Dashboard.Discover.CommunityShowcase.Report.Submit"),children:(0,i.jsx)(A.A,{value:ee,onChange:e=>et(e.target.value),placeholder:f("Dashboard.Discover.CommunityShowcase.Report.Placeholder"),required:!0,disabled:!1,maxLength:500,rows:5})})]})},ef=e=>{var t,a,s;let{showcaseId:l,taskId:r,workspaceId:n,commentsNumber:o,onReply:c}=e,[d,u]=(0,p.useState)(),[m,h]=(0,p.useState)(),N=(0,k.useSearchParams)(),I=(0,x.c3)(),{start:C,clear:M}=(0,w.Z)(()=>h(void 0),3e3),A=(e=>{let{showcaseId:t,taskId:a}=e,{isLoading:s,isAuthenticated:l}=(0,f.n)();return(0,j.Ay)(s?()=>null:y(t,a),async e=>{let{url:t,lastIndex:a}=e;return(await (0,b.MA)({method:"GET",url:t,params:{lastIndex:a,pageSize:4},needsToken:l})).data.result})})({showcaseId:l,taskId:r}),S=(e=>{let{showcaseId:t,taskId:a}=e,s=(0,x.c3)("Workspace.Comment");return(0,v.t)(function(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};return{url:t?"/public/showcases/".concat(t,"/comments/").concat(e,"/position"):"/v2/tasks/".concat(a,"/comments/").concat(e,"/position"),method:"GET",needsToken:!t}},{customErrorMessages:{InvalidParameters:s("Error.NotFound"),NotFound:s("Error.NotFound")}})})({showcaseId:l,taskId:r}),E=N.get("commentId"),T=A.setSize,P=S.trigger,R=(0,p.useCallback)(async e=>{u(e);let t=await P({id:e});t&&T(Math.floor(t.index/4)+1)},[T,P]);if((0,p.useEffect)(()=>{E&&R(E)},[E,R]),A.isLoading)return null;let z=null==(t=A.data)?void 0:t.flatMap(e=>e.list),D=null==(s=A.data)||null==(a=s.at(-1))?void 0:a.hasNext;return(0,i.jsxs)("div",{className:"space-y-5",children:[(0,i.jsx)("div",{className:"text-sm/5 font-medium",children:I("Workspace.Comment.CommentsNumber",{number:null!=o?o:""})}),null==z?void 0:z.map((e,t)=>(0,i.jsx)(ev,{ref:t=>{e.id===d&&(M(),C(),h(e.id),null==t||t.scrollIntoView({behavior:"smooth",block:"center"}),u(void 0))},highlight:e.id===m,comment:e,showcaseId:l,taskId:r,workspaceId:n,border:D||t!==z.length-1,onReply:()=>null==c?void 0:c(e),onSearch:R},e.id)),D&&(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(g.default,{type:"secondary",size:"xs",onClick:()=>A.setSize(A.size+1),children:I("Workspace.Comment.More")})})]})};var eb=a(84592),ej=a(2750);let ey=()=>{let e=(0,x.c3)();return ej.Ik({content:ej.Yj().min(1,e("Workspace.Comment.Error.Required")).max(500,e("Workspace.Comment.Error.MaxLength",{max:500})).refine(e=>e.trim().length>0,{message:e("Workspace.Comment.Error.Required")})})};var ew=a(66942),ek=a(2186),eN=a(40479),eI=a(22544);let eC=e=>{let{ref:t,editor:a,onChange:s,editorRef:l,header:r,bottom:n,placeholder:o,isError:c,maxLength:d,editorClassName:u,editableRef:m,rootClassName:x,renderElement:g,renderLeaf:v,renderPlaceholder:f,onFocus:b,onKeyDown:j,children:y}=e,{serializeEditorToPlainText:w}=es(),[k,N]=(0,p.useState)(0),I=d&&k>d,C=(0,p.useMemo)(()=>[{type:"paragraph",children:[{text:""}]}],[]),M=(0,p.useCallback)(e=>{try{if(!a||!a.children||0===a.children.length)throw Error("Invalid editor state");let t=w(a).trim();N(t.length),null==s||s(t,e)}catch(e){console.error("Slate editor change error:",e);try{et.KE.withoutNormalizing(a,()=>{a.children=[{type:"paragraph",children:[{text:""}]}],a.selection={anchor:{path:[0,0],offset:0},focus:{path:[0,0],offset:0}},a.onChange()}),N(0),null==s||s("")}catch(e){console.error("Failed to recover editor state:",e);try{a.children=[{type:"paragraph",children:[{text:""}]}],a.selection=null,a.onChange()}catch(e){console.error("Final recovery attempt failed:",e)}}}},[w,s,a]);return(0,p.useImperativeHandle)(l,()=>({focus:()=>{var e;m&&(null==(e=m.current)||e.focus())},clear:()=>{try{et.KE.withoutNormalizing(a,()=>{if(a.children&&0!==a.children.length){let e=a.children.length;for(let t=e-1;t>=0;t--)et.gB.removeNodes(a,{at:[t]});et.gB.insertNodes(a,{type:"paragraph",children:[{text:""}]},{at:[0]})}else et.gB.insertNodes(a,{type:"paragraph",children:[{text:""}]},{at:[0]});et.gB.select(a,{path:[0,0],offset:0})}),N(0),null==s||s("")}catch(e){console.error("Clear editor error:",e);try{a.children=[{type:"paragraph",children:[{text:""}]}],a.selection={anchor:{path:[0,0],offset:0},focus:{path:[0,0],offset:0}},a.onChange(),null==s||s(""),N(0)}catch(e){console.error("Fallback clear also failed:",e)}}}}),[s,a,m]),(0,i.jsxs)("div",{className:(0,h.cn)("border-bg-border bg-bg-base focus-within:border-bg-border relative overflow-hidden rounded-xl border",c&&"border-semantic-error-base",x),ref:t,children:[r,(0,i.jsx)("div",{className:"px-3 pt-2",children:(0,i.jsx)(X,{editor:a,initialValue:C,placeholder:o,onChange:M,onKeyDown:j,onFocus:b,className:(0,h.cn)("text-sm/5 selection:bg-[#4C5C2A]",u),editableRef:m,renderElement:g,renderLeaf:v,renderPlaceholder:f,children:y})}),d&&(0,i.jsxs)("div",{className:(0,h.cn)("text-label-muted px-4 py-1.5 text-right text-xs/4",I&&"text-semantic-error-base"),children:[k,"/",d]}),n]})};var eM=a(25979);let eA=async(e,t)=>(await (0,b.MA)({url:"/v1/me/mention-users",method:"get",params:{prefix:e,pageNum:t,pageSize:10},needsToken:!0})).data.result,eS=e=>{let{attributes:t}=e,a=(0,x.c3)();return(0,i.jsxs)("span",{...t,style:{...t.style},className:(0,h.cn)("group-focus/mention-textarea:text-label-base opacity-100! group-focus/mention-textarea:opacity-30"),children:[(0,i.jsx)("span",{className:"text-accent-base group-focus/mention-textarea:text-label-base group-focus/mention-textarea:opacity-30",children:a("Workspace.CustomRichTextEditor.Mention.Placeholder01")}),(0,i.jsxs)("span",{className:"text-label-muted group-focus/mention-textarea:text-label-base group-focus/mention-textarea:opacity-30",children:["\xa0",a("Workspace.CustomRichTextEditor.Mention.Placeholder02")]})]})},eE=e=>{let{attributes:t,children:a,element:s}=e;return"mention"===s.type?(0,i.jsx)(el,{...e,isQuoteMention:!1}):(0,i.jsx)("p",{...t,children:a})},eT=e=>{let{fetchMentions:t=eA,onFocus:a,onChange:s,editorRef:l,editorClassName:r,...n}=e,[o,c]=(0,p.useState)(""),[d,u]=(0,p.useState)(!1),{data:m,isLoading:g,fetchNextPage:v,hasNextPage:f,isFetchingNextPage:b}=(0,eM.useInfiniteQuery)({queryKey:["mentions",o],queryFn:async e=>{let{pageParam:a}=e;return{...await t(o,a),nextCursor:a+1}},initialPageParam:1,getNextPageParam:e=>{if(!1!==e.hasMore)return e.nextCursor},staleTime:1/0,enabled:o.length>0&&d}),j=(null==m?void 0:m.pages.flatMap(e=>e.list))||[],y=er(),w=(0,p.useRef)(null),k=(0,p.useMemo)(()=>{var e,t;let a=y((0,Y.o$)((0,ex.$k)((0,et.ie)())));return a.children=null!=(t=null==(e=w.current)?void 0:e.children)?t:[{type:"paragraph",children:[{text:""}]}],w.current=a,a},[y]),{state:N,onKeyDown:I,onChange:C,insertMention:M,Component:A}=(e=>{let{editor:t,mentions:a,isLoading:s,hasMore:l,onLoadMore:r,maxMentions:n=10,onSearchChange:o}=e,[c,d]=(0,p.useState)(""),[u,m]=(0,p.useState)(null),[h,g]=(0,p.useState)(0),v=(0,x.c3)(),f=(0,p.useCallback)(e=>{let{id:a,nickname:s}=e;if(Array.from(et.KE.nodes(t,{at:[],match:e=>et.Hg.isElement(e)&&"mention"===e.type})).length>=n)return void z.toast.error(v("Component.CustomRichTextEditor.Mention.MaxLength"));et.gB.insertNodes(t,{type:"mention",id:a,nickname:s,children:[{text:"@".concat(s)}]}),et.gB.move(t)},[v,n,t]),b=(0,p.useCallback)(e=>{if(u&&a&&a.length>0)switch(e.key){case"ArrowDown":return e.preventDefault(),g(h>=a.length-1?0:h+1),!0;case"ArrowUp":return e.preventDefault(),g(h<=0?a.length-1:h-1),!0;case"Tab":case"Enter":var s,l;return e.preventDefault(),et.gB.select(t,u),f({id:(null==(s=a[h])?void 0:s.userId)||"",nickname:(null==(l=a[h])?void 0:l.nickname)||""}),m(null),!0;case"Escape":return e.preventDefault(),m(null),!0}return!1},[a,h,u,f,t]),j=(0,en.Y)(()=>{let{selection:e}=t;if(e&&et.Q6.isCollapsed(e)){let[a]=et.Q6.edges(e),s=et.KE.before(t,a,{unit:"word"}),l=s&&et.KE.before(t,s),r=l&&et.KE.range(t,l,a),n=r&&et.KE.string(t,r),i=n&&n.match(/^@(\w*)$/),c=et.KE.after(t,a),u=et.KE.range(t,a,c),h=et.KE.string(t,u).match(/^(\s|$)/);if(i&&h){m(r);let e=i[1]||"";d(e),null==o||o(e),g(0);return}}m(null)},500);return{state:(0,p.useMemo)(()=>({search:c,target:u,index:h,setIndex:g,setSearch:d,setTarget:m}),[c,u,h]),onKeyDown:b,onChange:j,insertMention:f,Component:u&&c?(0,i.jsx)(eh,{mentions:null!=a?a:[],insertMention:f,target:u,setTarget:m,index:h,isLoading:null!=s&&s,isLoadingNextPage:!1,hasMore:null!=l&&l,onLoadMore:r}):null}})({editor:k,mentions:j,isLoading:g||!1,hasMore:f||!1,onLoadMore:v,onSearchChange:e=>{c(e)}}),{search:S,target:E,index:T,setIndex:P,setSearch:R,setTarget:D}=N,U=(0,p.useRef)(null);return(0,p.useImperativeHandle)(l,()=>({focus(){var e;null==(e=U.current)||e.focus()},clear(){var e;null==(e=U.current)||e.clear()},insertMention:M}),[M]),(0,i.jsx)(eC,{...n,editor:k,editorRef:U,onChange:(e,t)=>{null==s||s(e),C()},onKeyDown:e=>{null==I||I(e)},onFocus:()=>{u(!0),null==a||a()},renderPlaceholder:e=>(0,i.jsx)(eS,{...e}),renderElement:e=>(0,i.jsx)(eE,{...e}),editorClassName:(0,h.cn)("group/mention-textarea",r),children:A})},eP=e=>{let{showcaseId:t,comment:a,taskId:s,ref:l,onClose:r,onSubmit:n}=e,c=(0,x.c3)(),d=(e=>{let{showcaseId:t,taskId:a}=e,s=(0,x.c3)(),{mutate:l}=(0,o.Bw)(t);return ey(),(0,v.t)({url:t?"/v1/showcases/".concat(t,"/comments"):"/v2/tasks/".concat(a,"/comments"),method:"POST",needsToken:!0},{key:(0,j.WI)(y(t,a)),onSuccess:()=>{z.toast.success(s("Workspace.Comment.Success")),t&&l(e=>(0,R.jM)(e,e=>{e&&(e.comments=e.comments+1)}),{revalidate:!1})}})})({showcaseId:t,taskId:s}),u=ey(),m=(0,eI.mN)({resolver:(0,ew.u)(u)}),[f,b]=(0,p.useState)(!1),w=(0,p.useRef)(null),k=Object.keys(m.formState.errors).length>0;return(0,p.useImperativeHandle)(l,()=>({focus:()=>{var e;null==(e=w.current)||e.focus()}})),(0,p.useEffect)(()=>{a&&w.current&&w.current.insertMention({id:a.author.id,nickname:a.author.nickname})},[a]),(0,i.jsx)(eb.lV,{...m,children:(0,i.jsxs)("form",{onSubmit:m.handleSubmit(async e=>{if(await d.trigger({content:e.content,parentId:null==a?void 0:a.id})){var t;(null==(t=w.current)?void 0:t.clear)&&w.current.clear(),m.reset({content:""}),null==n||n()}}),className:"space-y-4",children:[(0,i.jsx)(eb.zB,{control:m.control,name:"content",render:e=>{let{field:t,fieldState:s}=e;return(0,i.jsxs)(eb.eI,{children:[(0,i.jsx)(eb.MJ,{children:(0,i.jsx)("div",{className:"flex flex-col gap-4",children:(0,i.jsx)(eT,{onChange:t.onChange,editorRef:w,maxLength:f?500:void 0,onFocus:()=>b(!0),isError:k,placeholder:c("Workspace.CustomRichTextEditor.Mention.Placeholder"),editorClassName:(0,h.cn)({"max-h-[20px] last:mb-2":!f,"h-15 overflow-scroll":f}),header:a&&(0,i.jsx)(eg,{content:a.content,nickname:a.author.nickname,icon:(0,i.jsx)(g.default,{type:"icon-tertiary",icon:(0,i.jsx)(ek.A,{size:16,stroke:1.5,className:"text-label-base"}),className:"flex-none",size:"xs",onClick:r})})})})}),(0,i.jsx)(eb.C5,{})]})}}),f&&(0,i.jsx)(g.default,{type:"primary",size:"md",icon:(0,i.jsx)(eN.A,{size:24,stroke:1.5}),htmlType:"submit",disabled:k||d.isMutating,children:c("Workspace.Comment.Create")})]})})};var eR=a(68201),ez=a(15372),eD=a(66274),eU=a(4831);let eF=e=>{let{showcaseId:t}=e,{data:a}=(0,ez.RG)({showcaseId:t,pageSize:10,sortBy:(0,b.VK)("desc",eD.LK.Trending)},!t),s=(0,eU.A)((null==a?void 0:a.flat())||[],e=>e.id),l=s.length>0,r=(0,x.c3)();return l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"bg-bg-border h-px"}),(0,i.jsx)("p",{className:"text-label-base text-sm",children:r("Landing.Collections.IncludedInCollection")}),(0,i.jsx)("div",{className:"grid w-full auto-rows-[0px] grid-cols-[repeat(auto-fill,minmax(96px,1fr))] grid-rows-1 gap-x-3 overflow-hidden",children:s.map(e=>(0,i.jsx)("div",{className:"size-24 flex-none",children:(0,i.jsx)(eR.a,{collection:e})},e.id))})]}):null};var eW=a(208),eO=a(35717),e_=a(56841);let eV=e=>{let{userId:t}=e,a=(0,x.c3)(),s=(0,O.ge)(),{userInfo:l,mutateUserInfo:r}=(0,E.Py)(t,!1),{myInfo:n}=(0,E.Iy)(),[o,c]=(0,p.useState)(null),d=(null==n?void 0:n.userId)===decodeURIComponent(t);return(0,i.jsxs)("div",{className:"space-y-4 rounded-xl bg-cover bg-center bg-no-repeat p-4 pb-2",style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.5) 0%, rgba(24, 24, 24, 0.95) 100%), url(".concat((null==l?void 0:l.backgroundUrl)||eO.$,")")},children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)(Z(),{href:s("/@".concat(null==l?void 0:l.uid)),target:"_blank",className:"flex items-center gap-3",children:[(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(I.A,{size:"sm",alt:(null==l?void 0:l.nickname)||"",src:(null==l?void 0:l.avatarUrl)||""}),(0,i.jsx)(P.w,{size:"md",tier:null==l?void 0:l.tier})]}),(0,i.jsx)("div",{className:"text-label-title text-base font-semibold",children:null==l?void 0:l.nickname})]}),!d&&(0,i.jsx)(eW.W,{userId:t,size:"sm",className:"font-medium"})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(eL,{title:a("Dashboard.Community.Profile.Published"),value:(null==l?void 0:l.totalNumberOfPublishedShowcases)||0}),(0,i.jsx)(eL,{title:a("Dashboard.Community.Profile.Featured"),value:(null==l?void 0:l.totalFeaturedOfUserShowcases)||0}),(0,i.jsx)(eL,{title:a((0,e_.A)(null==l?void 0:l.totalFollowers,1)?"Dashboard.Community.Profile.Follower":"Dashboard.Community.Profile.Followers"),value:(null==l?void 0:l.totalFollowers)||0,onClick:()=>c("Follower")}),(0,i.jsx)(eL,{title:a((0,e_.A)(null==l?void 0:l.totalFollowing,1)?"Dashboard.Community.Profile.Following":"Dashboard.Community.Profile.Followings"),value:(null==l?void 0:l.totalFollowing)||0,onClick:()=>c("Following")})]}),(0,i.jsx)(eW._,{userInfo:l,mutateUserInfo:r,selectedSection:o,setSelectedSection:c})]})},eL=e=>{let{title:t,value:a,onClick:s}=e;return(0,i.jsxs)("div",{className:s&&"hover:bg-bg-translucent-strong cursor-pointer rounded-lg p-2",onClick:s,children:[(0,i.jsx)("div",{className:"text-label-base text-center text-sm/5 font-medium",children:a}),(0,i.jsx)("div",{className:"text-2xs/3 text-label-muted text-center font-medium",children:t})]})};function eB(){return(eB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}let eH=function(e){return p.createElement("svg",eB({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 16 16",fill:"none"},e),s||(s=p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.333 1.5a.5.5 0 0 1 .5.5v2.667a.167.167 0 0 0 .167.166h2.667a.5.5 0 1 1 0 1H10a1.167 1.167 0 0 1-1.167-1.166V2a.5.5 0 0 1 .5-.5Z",fill:"#696969"})),l||(l=p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.667 2.5a.833.833 0 0 0-.834.833v9.334a.833.833 0 0 0 .834.833h2a.5.5 0 0 1 0 1h-2a1.833 1.833 0 0 1-1.834-1.833V3.333A1.833 1.833 0 0 1 4.667 1.5h4.666a.5.5 0 0 1 .354.146L13.02 4.98a.5.5 0 0 1 .147.353v2.334a.5.5 0 1 1-1 0V5.54L9.127 2.5h-4.46Z",fill:"#696969"})),r||(r=p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.5 6a.5.5 0 0 1 .5-.5h.667a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5ZM5.5 8.667a.5.5 0 0 1 .5-.5h1.667a.5.5 0 1 1 0 1H6a.5.5 0 0 1-.5-.5ZM5.5 11.333a.5.5 0 0 1 .5-.5h.667a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5ZM10.667 10.5a.833.833 0 0 0-.834.833V14a.5.5 0 0 1-1 0v-2.667a1.833 1.833 0 0 1 3.667 0V14a.5.5 0 1 1-1 0v-2.667a.834.834 0 0 0-.833-.833Z",fill:"#696969"})),n||(n=p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.833 12.667a.5.5 0 0 1 .5-.5H12a.5.5 0 1 1 0 1H9.333a.5.5 0 0 1-.5-.5ZM14 9.5a.5.5 0 0 1 .5.5v4a.5.5 0 1 1-1 0v-4a.5.5 0 0 1 .5-.5Z",fill:"#696969"})))};var eK=a(70957),eJ=a(61863),eG=a(97465),eZ=a(19181),eY=a(3114),e$=a(85332),eQ=a(21470),eq=a(74709),eX=a(45600),e0=a(43831),e1=a(48077),e5=a(94927),e3=a(87695),e6=a(47650);let e2=e=>{let{contents:t,className:a,rootClassName:s,itemClassName:l,expandNode:r,collapseNode:n,rows:o=1,gap:c=0,style:d,ssrHeight:u=0}=e,[m,x]=(0,p.useState)(!1),[g,v]=(0,p.useState)(u);(0,p.useEffect)(()=>{v(0)},[]);let f=(0,p.useMemo)(()=>t.filter(e=>null!=e),[t]),b="number"==typeof c?{x:c,y:c}:c,j=(0,i.jsx)("div",{className:(0,h.cn)("cursor-pointer",l),onClick:()=>x(!0),children:r}),y=(0,i.jsx)("div",{className:(0,h.cn)("cursor-pointer",l),onClick:()=>x(!1),children:n}),[w,k]=(0,p.useState)(0),[N,I]=(0,p.useState)(100),[C,M]=(0,p.useState)([0,0]),A=Math.ceil((C[0]+C[1])/2),S=(0,p.useRef)(null),E=(0,p.useRef)(null),T=(0,p.useRef)(null),P=(0,p.useRef)(null),R=(0,e1.A)(()=>{(0,e6.unstable_batchedUpdates)(()=>{I(1),M([0,f.length])})});(0,e3.A)(()=>{R()},[f,o,R]),function(e,t){let a=(0,e1.A)(e);(0,e5.A)(()=>{let e=t.current;if(e)if(window.ResizeObserver){let t,s=new ResizeObserver(()=>{t=window.requestAnimationFrame(()=>a(e))});return s.observe(e),()=>{window.cancelAnimationFrame(t),s.disconnect()}}else a(e)},[t])}(R,P),(0,e5.A)(()=>{if(1===N){var e,t;let a=(null==(e=E.current)?void 0:e.offsetHeight)||0,s=((null==(t=S.current)?void 0:t.offsetHeight)||0)*o+b.y*(o-1);a<=s?I(100):(k(s),I(2))}},[N]),(0,e5.A)(()=>{if(2===N){var e;let t=C[1]-C[0],a=(null==(e=T.current)?void 0:e.offsetHeight)||0;t>1?a>w?M([C[0],A]):M([A,C[1]]):(a>w?M([C[0],C[0]]):M([C[1],C[1]]),I(99))}},[N,C]);let z=(0,e1.A)(e=>(0,i.jsxs)(i.Fragment,{children:[f.slice(0,e).map(e=>{let{key:t,content:a}=e;return(0,i.jsx)("div",{className:l,children:a},t)}),j]}));return(0,i.jsxs)("div",{ref:P,className:s,children:[1===N&&(0,i.jsx)("div",{"aria-hidden":!0,className:(0,h.cn)("flex flex-wrap",a,"invisible"),style:{columnGap:b.x,rowGap:b.y,...d},ref:E,children:f.map(e=>{let{key:t,content:a}=e;return(0,i.jsx)("div",{className:l,ref:S,children:a},t)})},"full"),2===N&&(0,i.jsx)("div",{"aria-hidden":!0,ref:T,className:(0,h.cn)("flex flex-wrap",a,"invisible"),style:{columnGap:b.x,rowGap:b.y,...d},children:z(A)},"walking-mid"),m||100===N?(0,i.jsxs)("div",{className:(0,h.cn)("flex flex-wrap",a),style:{columnGap:b.x,rowGap:b.y,...d,...g>0?{maxHeight:g,overflow:"hidden"}:{}},children:[f.map(e=>{let{key:t,content:a}=e;return(0,i.jsx)("div",{className:l,children:a},t)}),99===N&&y]},"display"):99===N?(0,i.jsx)("div",{className:(0,h.cn)("flex flex-wrap",a),style:{columnGap:b.x,rowGap:b.y,...d},children:z(A)},"display"):null]})};var e4=a(36924),e9=a(4996),e8=a(73610),e7=a(48488),te=a(15239);let tt=e=>{let{title:t,imageUrls:a,className:s}=e,{dialogComponent:l,openDialog:r}=(0,e4.B)();return(null==a?void 0:a.length)?(0,i.jsxs)("div",{className:(0,h.cn)("space-y-2",s),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"flex-1 text-sm font-medium",children:t}),(0,i.jsx)(Z(),{tabIndex:-1,download:"downloaded_image.jpg",target:"_blank",href:a[0],children:(0,i.jsx)(g.default,{type:"icon-tertiary",size:"xs",icon:(0,i.jsx)(e9.A,{className:"size-5",stroke:1.5})})})]}),(0,i.jsxs)("div",{className:(0,h.cn)("group/image border-bg-border relative size-[60px] cursor-pointer overflow-hidden rounded-xl border",s),onClick:()=>{r(a[0],a)},children:[(0,i.jsx)(te.default,{src:a[0],width:60,height:60,alt:"image",className:"size-full object-contain",unoptimized:!0}),a&&a.length>1&&(0,i.jsx)(e8.A,{className:"bg-bg-modal-overlay-sub text-label-base absolute top-1 right-1 size-5 rounded-xs",stroke:1.5}),(0,i.jsx)("div",{className:"bg-bg-modal-overlay absolute inset-0 hidden items-center justify-center group-hover/image:flex",children:(0,i.jsx)(e7.A,{size:16,stroke:1.5})})]}),l]}):null};var ta=a(59192),ts=a(20578),tl=a(54496),tr=a(78171);let tn=e=>{let{title:t,content:a,className:s,expandable:l,tooltip:r}=e,[n,o]=(0,p.useState)(!1);return a?(0,i.jsxs)("div",{className:(0,h.cn)("space-y-2",s),children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-1 items-center gap-1",children:[(0,i.jsx)("div",{className:"text-sm font-medium",children:t}),r&&(0,i.jsx)(S.A,{side:"top",title:r,className:"max-w-[288px]",children:(0,i.jsx)(tl.A,{className:"text-label-faint hover:text-label-muted size-3 transition duration-100 ease-out"})})]}),(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)(ts.i,{text:a,type:"icon-tertiary"}),l&&(0,i.jsx)(g.default,{type:"icon-tertiary",size:"xs",icon:n?(0,i.jsx)(ta.A,{}):(0,i.jsx)(tr.A,{size:16,stroke:1.5}),onClick:()=>o(!n)})]})]}),(0,i.jsx)("div",{className:(0,h.cn)("text-label-soft text-xs/4",!n&&l&&"line-clamp-2"),children:a})]}):null},ti=e=>{var t,a;let{task:s,showcase:l}=e,r=(0,x.c3)(),n=(0,eG.do)(),o=(0,O.ge)(),c=s.modelPrompt===s.texturePrompt,d=(0,eY.Jt)(s.modelImages[0]||"")===(0,eY.Jt)(s.textureImage),u=null==s?void 0:s.workspaceId,{workspaces:m}=(0,eJ.CH)(),h=null==(t=m.find(e=>e.id===u))?void 0:t.name,p=(0,i.jsx)(eK.A,{text:"",icon:(0,i.jsx)(B.A,{className:"size-4",stroke:1.5}),style:"outline",shape:"rectangular",size:"md",className:"text-label-base hover:text-label-base h-6!",iconClassName:"ml-0"});return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("h1",{className:"text-label-title line-clamp-1 text-base font-semibold",children:s.title}),(0,i.jsxs)("div",{className:"space-y-2",children:[l&&l.categories&&l.categories.length>0&&(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("div",{className:"flex h-6 items-center",children:(0,i.jsx)(e$.A,{className:"size-4",stroke:1.5})}),(0,i.jsx)(e2,{gap:8,rows:2,itemClassName:"text-[0px] h-fit",contents:l.categories.map((e,t)=>{let a=eZ.rh.find(t=>t.value===e);return a?{key:a.value,content:(0,i.jsx)(eK.A,{text:r("".concat(a.key)),icon:(0,i.jsx)(a.icon,{}),style:"outline",shape:"rectangular",size:"md",link:o("/discover?category=".concat(e)),className:"text-label-base hover:text-label-base h-6!",iconClassName:"ml-0"})}:null}).filter(Boolean),ssrHeight:56,expandNode:p})]}),l&&l.tags&&l.tags.length>0&&(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)("div",{className:"flex h-6 items-center",children:(0,i.jsx)(eQ.A,{className:"size-4",stroke:1.5})}),(0,i.jsx)(e2,{gap:8,rows:2,itemClassName:"text-[0px] h-fit",contents:null==(a=l.tags)?void 0:a.map((e,t)=>({key:e,content:(0,i.jsx)(eK.A,{text:e,style:"outline",shape:"rectangular",size:"md",link:o("/tags/".concat(e)),className:"text-label-base hover:text-label-base h-6!",iconClassName:"ml-0"},e)})),ssrHeight:56,expandNode:p})]})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)(S.A,{side:"top",title:r("Workspace.Shared.Sidebar.AIModel"),asChild:!0,children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(eH,{}),(0,i.jsx)("span",{className:"text-label-base text-center text-xs/4",children:s.aiModel})]})}),!u&&(0,i.jsx)(S.A,{title:n,asChild:!0,children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(eq.A,{className:"text-label-muted",size:16,stroke:1.5}),(0,i.jsx)("span",{className:"text-label-base text-center text-xs/4",children:s.license})]})}),l&&!u&&(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(eX.A,{size:16,stroke:1.5,className:"text-label-muted"}),(0,i.jsx)(T.s,{className:"text-label-base text-center text-xs/4",timestamp:l.createdAt})]}),h&&(0,i.jsx)(S.A,{title:r("Workspace.Shared.Sidebar.Workspace.Title"),asChild:!0,children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(e0.A,{size:16,stroke:1.5,className:"text-label-muted"}),(0,i.jsx)("span",{className:"text-label-base text-center text-xs/4",children:h})]})}),u&&(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)(eX.A,{size:16,stroke:1.5,className:"text-label-muted"}),(0,i.jsx)(T.s,{className:"text-label-base text-center text-xs/4",timestamp:s.addedAt})]})]}),(0,i.jsx)("div",{className:"bg-bg-border h-px"}),(0,i.jsx)(tn,{title:r("Workspace.ImageTo3d.Sidebar.Name.Title"),content:s.modelImageName,tooltip:r("Workspace.ImageTo3d.Sidebar.Name.Tooltip")}),(0,i.jsx)(tn,{title:c?r("Workspace.Shared.Sidebar.Text.Prompt.Title"):r("Workspace.GenerationInfo.ModelPrompt"),content:s.modelPrompt,expandable:!0}),(s.modelImages.length>0||s.textureImage)&&(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)(tt,{title:d?r("Workspace.Shared.Sidebar.ImageInput.Default"):r("Workspace.GenerationInfo.ModelImage"),imageUrls:s.modelImages,className:"flex-1"}),!d&&s.modelImages.length>0&&s.textureImage&&(0,i.jsx)("div",{className:"bg-bg-border -mb-4 w-px flex-none self-stretch"}),!d&&s.textureImage&&(0,i.jsx)(tt,{title:r("Workspace.GenerationInfo.TextureImage"),imageUrls:[s.textureImage],className:"flex-1"})]}),!c&&(0,i.jsx)(tn,{title:r("Workspace.GenerationInfo.TexturePrompt"),content:s.texturePrompt,expandable:!0})]})};var to=a(67196),tc=a(48471),td=a(43946),tu=a(95227),tm=a(15547),th=a(38143),tx=a(5573),tp=a(62906),tg=a(46512);let tv=e=>{let{userId:t=null,onSuccess:a}=e,s=(0,x.c3)(),l=(0,O.ge)(),{userInfo:r}=(0,E.Py)(t,!1),{isLoading:n,isAuthenticated:c}=(0,f.n)(),{data:d}=(0,ez.RG)({createdBy:t||"",pageSize:1,sortBy:(0,b.VK)("desc",eD.LK.Trending)}),u=(0,eU.A)((null==d?void 0:d.flat())||[],e=>e.id)[0],{data:m}=(0,tg.Ay)(!n&&r&&t?["showcase-user",t]:null,async e=>{let[,t]=e;return(c?tx.$0:tp.Sz)({publishedByUser:t,pageNum:1,pageSize:8,sortBy:(0,b.VK)("desc",tp.sE.Popularity)})},{onSuccess:()=>{null==a||a()}}),h=(0,eU.A)((null==m?void 0:m.flat())||[],e=>e.id),g=(0,p.useContext)(C.MV),v=(0,th.j)(e=>e.showcaseDialogRef);return r&&(null==h?void 0:h.length)!==0?(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)("div",{className:"text-label-base text-sm/5 font-medium",children:s("Dashboard.Community.Profile.MoreByUser",{user:null==r?void 0:r.nickname})}),u&&(0,i.jsxs)("div",{className:"group flex gap-4",children:[(0,i.jsx)(eR.a,{collection:u,className:"min-w-28"}),(0,i.jsxs)(Z(),{href:l((0,tc.n)(u.id,u.name)),className:"flex w-full flex-col justify-between",target:"_blank",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)("p",{className:"text-label-base line-clamp-3 text-xs break-all",children:u.description}),(0,i.jsx)("p",{className:"text-label-muted text-xs",children:(0,i.jsx)(T.s,{timestamp:u.createdAt})})]}),(0,i.jsx)("div",{className:"text-label-base flex items-center gap-4 py-2 text-xs",children:(0,i.jsx)(to.l,{collectionId:u.id,type:"page"})})]})]}),null==h?void 0:h.map((e,t)=>{var a,s,r,n;return(0,i.jsxs)(Z(),{href:l((0,tm.S)({id:e.animationId||e.resultId,isAnimation:!!e.animationId,objectPrompt:e.objectPrompt||(null==(s=e.args)||null==(a=s.draft)?void 0:a.prompt),isTaskV2:(0,o.Yv)(e)})),scroll:!0,className:"group flex cursor-pointer gap-4",onClick:t=>{if(g&&!(t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)){var a;t.preventDefault(),null==v||null==(a=v.current)||a.open(e.id,h)}},children:[(0,i.jsx)("div",{className:"bg-bg-strong relative size-[113px] flex-none overflow-hidden rounded-2xl",children:(0,i.jsx)(te.default,{alt:"showcase",width:113,height:113,className:"absolute inset-0 size-full object-contain transition-transform duration-300 ease-out group-hover:scale-110",src:e.thumbnailUrl,unoptimized:!0})}),(0,i.jsxs)("div",{className:"flex grow flex-col items-start justify-between",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("div",{className:"text-label-base group-hover:text-label-title line-clamp-3 text-xs transition-colors duration-150 ease-out",children:e.objectPrompt||e.name||(null==(n=e.args)||null==(r=n.draft)?void 0:r.prompt)}),(0,i.jsxs)("div",{className:"flex grow-0 flex-col items-start justify-start gap-2 sm:flex-row sm:items-center",children:[!e.args&&(0,i.jsx)(tu._,{type:e.mode,isViewer:!1}),(0,i.jsx)("p",{className:"text-label-muted grow-0 text-left text-xs transition-colors duration-150 ease-out",children:(0,i.jsx)(T.s,{timestamp:e.createdAt})})]})]}),(0,i.jsx)(td.T,{showcase:e})]})]},t)})]}):null},tf="comment",tb=(0,p.forwardRef)((e,t)=>{var a,s,l;let{taskId:r,taskType:n,secret:g,className:v}=e,{isPublic:f}=(0,c.p)(),b=(0,p.useRef)(null),j=(0,p.useRef)(null),y=(0,m.b7)({taskId:r,type:n,secret:g,isPublic:f});(0,x.c3)();let w=(0,o.Bw)(f&&(null==(a=y.data)?void 0:a.showcaseId)||null),[k,N]=(0,p.useState)(!1),[I,C]=(0,p.useState)(),M=y.data,A=null!=(l=w.data)?l:void 0,S=null==(s=y.data)?void 0:s.workspaceId,E=!!((null==M?void 0:M.showcaseId)||S),T=!!(k&&E),[P,R]=(0,p.useState)(Date.now()),{verifyChecklistTaskIfNeeded:z}=(0,d.CX)("supportCommunity");return((0,p.useEffect)(()=>{(()=>{if(window.location.hash.replace("#","")===tf&&b.current&&T){var e;history.replaceState(null,"",window.location.pathname+window.location.search),null==(e=b.current)||e.scrollIntoView({behavior:"smooth"})}})()},[T]),(0,p.useImperativeHandle)(t,()=>({scrollToComment:()=>{var e;null==(e=b.current)||e.scrollIntoView({behavior:"smooth"})}})),M)?(0,i.jsxs)("div",{className:(0,h.cn)("space-y-4",v),children:[(0,i.jsx)(eV,{userId:M.userId}),(0,i.jsx)(ti,{task:M,showcase:A}),(0,i.jsx)(u.Y,{taskId:r}),E&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"bg-bg-border h-px"}),(0,i.jsxs)("div",{className:"space-y-5 py-2",ref:b,children:[(0,i.jsx)(eP,{taskId:r,showcaseId:M.showcaseId,comment:I,ref:j,onClose:()=>C(void 0),onSubmit:()=>{C(void 0),R(Date.now()),z()}},P),(0,i.jsx)(ef,{taskId:r,showcaseId:M.showcaseId,workspaceId:S,commentsNumber:(null==A?void 0:A.comments)||0,onReply:e=>{var t;C(e),null==(t=j.current)||t.focus()}})]})]}),(0,i.jsx)(eF,{showcaseId:(null==M?void 0:M.showcaseId)||""}),(0,i.jsx)("div",{className:"bg-bg-border h-px"}),!S&&(0,i.jsx)(tv,{userId:M.userId,byUID:!1,onSuccess:()=>N(!0)})]}):null});tb.displayName="GenerationInfo"},50710:(e,t,a)=>{a.d(t,{M:()=>n});var s=a(75731),l=a(89863);let r={lastDownloadMeshFormat:"glb","Workspace.AssetsList.Width":304,"Workspace.AssetsList.HasCustomizedWidth":!1,"Workspace.AssetsList.ViewMode":"folder","Workspace.AssetsList.PageSize":20},n=(0,s.vt)()((0,l.Zr)((e,t)=>({...r,setViewMode:t=>{e({"Workspace.AssetsList.ViewMode":t})},setLastDownloadMeshFormat:t=>{e({lastDownloadMeshFormat:t})},reset(){e({...r})}}),{name:"meshy-workspace-preference",version:1}))},55182:(e,t,a)=>{a.d(t,{Y:()=>n,r:()=>l});var s=a(75731),l=function(e){return e.MODEL_VIEW="MODEL_VIEW",e.COLOR_MAP="COLOR_MAP",e.ROUGHNESS_MAP="ROUGHNESS_MAP",e.METALLIC_MAP="METALLIC_MAP",e.NORMAL_MAP="NORMAL_MAP",e.HEIGHT_MAP="HEIGHT_MAP",e.CURVATURE_MAP="CURVATURE_MAP",e.AO_MAP="AO_MAP",e.POSITION_MAP="POSITION_MAP",e.BAKED_MAP="BAKED_MAP",e}({});let r={viewSwitcherViewId:"MODEL_VIEW",expandNavSubMenu:!1,mobileNavOpen:!1},n=(0,s.vt)(e=>({...r,reset(){e(r)}}))},55499:(e,t,a)=>{a.d(t,{b7:()=>n});var s=a(18955),l=a(46512),r=a(43610);let n=e=>{let{taskId:t,type:a,secret:n,isPublic:i}=e,o=(0,s.c3)();return(0,l.Ay)(t?(0,r.P5)({taskId:t,type:a,secret:n,isPublic:i}):null,async e=>{let{url:t,params:s}=e;return(0,r.gg)({url:t,type:a,params:s,t:o,isPublic:i})})}},61863:(e,t,a)=>{a.d(t,{CH:()=>c,o0:()=>d,sp:()=>u});var s=a(22317),l=a(131),r=a(39936),n=a(75912),i=a(12115),o=a(46512);let c=()=>{let{data:e}=(0,l.o)(),{isAuthenticated:t}=(0,s.n)(),{data:a,isLoading:r,error:i,mutate:c}=(0,o.Ay)(t&&((null==e?void 0:e.tier)==="enterprise"||(null==e?void 0:e.tier)==="studio")?"workspaces":null,async()=>await (0,n.FF)()),d=null==a?void 0:a.filter(e=>"active"===e.status&&e.userRole);return{workspaces:a||[],availableWorkspaces:d||[],isLoading:r,error:i,mutate:c}},d=()=>{let{currentWorkspaceId:e,setCurrentWorkspaceId:t}=(0,r.M)(),{isLoading:a,mutate:s,availableWorkspaces:l}=c(),n=(0,i.useMemo)(()=>l.find(t=>t.id===e)||null,[l,e]);return(0,i.useEffect)(()=>{e&&n||!(l.length>0)||t(l[0].id)},[e,n,l,t]),{currentWorkspace:n,currentWorkspaceId:e,setCurrentWorkspaceId:t,isLoading:a,mutate:s}},u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{currentWorkspaceId:t}=d(),{data:a,isLoading:s,error:l,mutate:r}=(0,o.Ay)(t?["workspace-members-".concat(t),e]:null,async()=>t?await (0,n.Vr)(t,e):null),c=(0,i.useMemo)(()=>(null==a?void 0:a.filter(e=>"active"===e.status))||[],[a]);return{members:a||[],availableWorkspaceMembers:c,isLoading:s,error:l,mutate:r}}},75912:(e,t,a)=>{a.d(t,{CH:()=>o,FF:()=>l,K3:()=>u,NN:()=>x,Sv:()=>i,Vr:()=>r,WL:()=>m,XO:()=>h,jf:()=>d,m3:()=>c,sK:()=>n});var s=a(16680);let l=async()=>{try{var e;let t=await (0,s.MA)({url:"".concat("https://api.meshy.ai/web").concat(s.MF.WorkspacesV1),method:"GET",needsToken:!0});return(null==t||null==(e=t.data)?void 0:e.result)||[]}catch(e){return console.error(e),null}},r=async(e,t)=>{try{var a;let l=await (0,s.MA)({url:"".concat("https://api.meshy.ai/web").concat(s.MF.WorkspacesV1,"/").concat(e,"/members"),params:t,method:"GET",needsToken:!0});return(null==l||null==(a=l.data)?void 0:a.result)||[]}catch(e){return console.error(e),null}},n=async e=>{try{return await (0,s.MA)({url:"".concat("https://api.meshy.ai/web").concat(s.MF.WorkspacesV1),method:"POST",data:e,needsToken:!0}),!0}catch(e){return console.error(e),null}},i=async(e,t)=>{try{return await (0,s.MA)({url:"".concat("https://api.meshy.ai/web").concat(s.MF.WorkspacesV1,"/").concat(e,"/members/batch-update"),method:"POST",data:t,needsToken:!0}),!0}catch(e){return console.error(e),null}},o=async e=>{try{return await (0,s.MA)({url:"".concat("https://api.meshy.ai/web").concat(s.MF.WorkspacesV1,"/").concat(e),method:"DELETE",needsToken:!0}),!0}catch(e){return console.error(e),null}},c=async e=>{try{return await (0,s.MA)({url:"".concat("https://api.meshy.ai/web").concat(s.MF.WorkspacesV1,"/").concat(e,"/restore"),method:"POST",needsToken:!0}),!0}catch(e){return console.error(e),null}},d=async e=>{try{return await (0,s.MA)({url:"".concat("https://api.meshy.ai/web").concat(s.MF.WorkspacesV1,"/").concat(e,"/leave"),method:"POST",needsToken:!0}),!0}catch(e){return console.error(e),null}},u=async(e,t)=>{try{return await (0,s.MA)({url:"".concat("https://api.meshy.ai/web").concat(s.MF.WorkspacesV1,"/").concat(e),method:"PATCH",data:t,needsToken:!0}),!0}catch(e){return console.error(e),null}},m=async(e,t,a)=>{try{return await (0,s.MA)({url:"".concat("https://api.meshy.ai/web").concat(s.MF.WorkspacesV1,"/").concat(e,"/members/").concat(t,"/suspend"),method:"POST",data:a,needsToken:!0}),!0}catch(e){return console.error(e),null}},h=async(e,t,a)=>{try{return await (0,s.MA)({url:"".concat("https://api.meshy.ai/web").concat(s.MF.WorkspacesV1,"/").concat(e,"/members/").concat(t),method:"PATCH",data:a,needsToken:!0}),!0}catch(e){return console.error(e),null}},x=async(e,t)=>{try{return await (0,s.MA)({url:"".concat("https://api.meshy.ai/web").concat(s.MF.WorkspacesV1,"/").concat(e,"/members/").concat(t,"/activate"),method:"POST",needsToken:!0}),!0}catch(e){var a,l;return console.error("Fail to activate workspace member",e),(null==(l=e.response)||null==(a=l.data)?void 0:a.code)||null}}},84592:(e,t,a)=>{a.d(t,{C5:()=>w,Gb:()=>f,MJ:()=>j,Rr:()=>y,eI:()=>v,fp:()=>g,lR:()=>b,lV:()=>u,zB:()=>h});var s=a(95155),l=a(43991),r=a(32467),n=a(54496),i=a(12115),o=a(22544),c=a(52787),d=a(66599);let u=o.Op,m=i.createContext({}),h=e=>{let{...t}=e;return(0,s.jsx)(m,{value:{name:t.name},children:(0,s.jsx)(o.xI,{...t})})},x=()=>{let e=i.useContext(m),t=i.useContext(p),{getFieldState:a,formState:s}=(0,o.xW)(),l=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:r}=t;return{id:r,name:e.name,formItemId:"".concat(r,"-form-item"),formDescriptionId:"".concat(r,"-form-item-description"),formMessageId:"".concat(r,"-form-item-message"),...l}},p=i.createContext({});function g(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"form-item",className:(0,d.cn)("flex flex-col gap-2",t),...a})}function v(e){let t=i.useId();return(0,s.jsx)(p,{value:{id:t},children:(0,s.jsx)(g,{...e})})}function f(e){let{className:t,children:a,tip:r,...i}=e;return(0,s.jsxs)(l.b,{"data-slot":"form-label",className:(0,d.cn)("text-label-base text-sm-plus flex items-center gap-1",t),...i,children:[a,r&&(0,s.jsx)(c.A,{title:r,titleClassName:"whitespace-pre-line",asChild:!0,children:(0,s.jsx)(n.A,{className:"text-label-faint hover:text-label-muted size-3 transition duration-100 ease-out"})})]})}function b(e){let{formItemId:t}=x();return(0,s.jsx)(f,{htmlFor:t,...e})}function j(e){let{...t}=e,{error:a,formItemId:l,formDescriptionId:n,formMessageId:i}=x();return(0,s.jsx)(r.DX,{"data-slot":"form-control",id:l,"aria-describedby":a?"".concat(n," ").concat(i):"".concat(n),"aria-invalid":!!a,...t})}function y(e){let{className:t,...a}=e,{formDescriptionId:l}=x();return(0,s.jsx)("p",{"data-slot":"form-description",id:l,className:(0,d.cn)("text-label-muted text-xs/4",t),...a})}function w(e){var t;let{className:a,...l}=e,{error:r,formMessageId:n}=x(),i=r?String(null!=(t=null==r?void 0:r.message)?t:""):l.children;return i?(0,s.jsx)("p",{"data-slot":"form-message",id:n,className:(0,d.cn)("text-semantic-error-base text-xs/4",a),...l,children:i}):null}},95333:(e,t,a)=>{a.d(t,{N:()=>i,n:()=>n});var s=a(59634),l=a(26302),r=a(12115);let n=()=>{let e=(0,l.sf)(),{client:t}=(0,s.useStatsigClient)();return(0,r.useCallback)((a,s)=>{e.capture(a,s),t.logEvent({eventName:a,metadata:s})},[e,t])},i=()=>{let e=n();return(t,a)=>{e("tooltip_unlock_with_premium_click",{position:t,...a})}}},97465:(e,t,a)=>{a.d(t,{do:()=>p,jI:()=>x,u8:()=>g});var s=a(95155),l=a(284),r=a(66292),n=a(84636),i=a(52787),o=a(38143),c=a(131),d=a(16680),u=a(66599),m=a(54496),h=a(18955);let x=e=>{let t=(0,h.c3)();switch(e){case d.JW.CC_ZERO:return"CC0";case d.JW.CC_BY_FOUR:return"CC BY 4.0";case d.JW.PRIVATE:return t("Workspace.ImageTo3d.Sidebar.License.Private");default:return""}},p=e=>{let{showCCZero:t}=e||{showCCZero:!0};return(0,h.c3)().rich("Workspace.ImageTo3d.Sidebar.License.Tooltip",{desc:e=>(0,s.jsxs)("span",{className:"text-label-muted",children:[" ",e]}),br:()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]}),cczero:e=>(0,s.jsx)(s.Fragment,{children:t?e:null})})},g=e=>{let{value:t,onChange:a,size:g="lg"}=e,{isPremiumTooltipRedesign:v}=(0,l.f)(),f=(0,h.c3)(),b=(0,o.j)(e=>e.getCreditDialogRef),{data:j}=(0,c.o)(),y=j.isUnsubscribed,w=x(d.JW.PRIVATE),k=[{value:d.JW.CC_BY_FOUR,text:x(d.JW.CC_BY_FOUR)},{value:d.JW.PRIVATE,text:v?(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"text-label-muted group-hover:text-label-title",children:w}),(0,s.jsx)(n.E,{hasBackground:!1})]}):(0,s.jsx)(s.Fragment,{children:w}),proOnly:y,tooltip:y?f("Common.UnlockWithSubscription"):void 0}];return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:(0,u.cn)("text-label-base font-medium select-none",{"text-xs":"sm"===g,"text-sm":"lg"===g}),children:f("Workspace.Publish.License.Default")}),(0,s.jsx)(i.A,{title:p({showCCZero:!1}),children:(0,s.jsx)(m.A,{className:"text-label-faint hover:text-label-muted size-3 transition duration-100 ease-out"})})]}),(0,s.jsx)(r.A,{size:"sm"===g?"small":"large",options:k,value:String(t),onChange:(e,t)=>{if(t.proOnly){var s;null==(s=b.current)||s.open({position:"license_source"});return}a(e)}})]})}},98999:(e,t,a)=>{a.d(t,{Nh:()=>h,ON:()=>C,T_:()=>k,Ux:()=>u,Zq:()=>p,aQ:()=>y,kX:()=>v,lY:()=>N,uS:()=>c,vo:()=>i});var s=a(48374),l=a(16680),r=a(75731),n=a(89863);let i=(0,r.vt)((e,t)=>({current:"draft",isExpanded:!1,isHighlight:!1,isHelperOpen:!1,open:(t,a)=>{e({current:t,isExpanded:!1}),(null==a?void 0:a.highlight)&&(setTimeout(()=>{e({isHighlight:!0})},50),setTimeout(()=>{e({isHighlight:!1})},500))},setIsHelperOpen:t=>{e({isHelperOpen:t})},setIsExpanded:t=>{e({isExpanded:t})}})),o={aiModel:l.jZ.FluxKontext,prompt:"",imageId:"",imageUrl:"",imagePromptStrength:.5,aspectRatio:"1:1",useOriginalPrompt:!1,isUseMultiView:!1,isAtPose:!1},c=(0,r.vt)((e,t)=>({...o,isMultiViewDisabled:()=>t().aiModel===l.jZ.NanoBanana,isAspectRatioDisabled:()=>t().aiModel===l.jZ.NanoBanana||t().isUseMultiView,isImageStrengthDisabled:()=>!t().imageId||t().aiModel===l.jZ.FluxKontext||t().aiModel===l.jZ.NanoBanana,reset(){e({...o})}})),d={aiModel:l.jZ.Meshy5_1,img3dAIModel:l.jZ.Meshy5_1,genMode:"img3d",prompt:"",imageIds:["","","",""],imageUrls:["","","",""],batchImageTo3DImages:[],generatingMultiView:!1,imageName:"",isUseRemoveBackground:!1,symmetryMode:l.HF.AUTO,isUseMultiView:!1,license:l.JW.CC_BY_FOUR,isAtPoseForImage:!1,isAtPoseForText:!1,numberOfGenerations:1},u=(0,r.vt)((e,t)=>({...d,reset(){e({...d})},setImageId(a,s){let l=[...t().imageIds];l[a]=s,e({imageIds:l})},setImageUrl(a,s){let l=[...t().imageUrls];l[a]=s,e({imageUrls:l})},setBatchImageTo3DImages(t){e({batchImageTo3DImages:t})},setImageIds(t){e({imageIds:[...t,"","","",""].slice(0,4)})},setImageUrls(t){e({imageUrls:[...t,"","","",""].slice(0,4)})}})),m={modelId:"",modelName:"",enableOriginalUV:!1,license:l.JW.CC_BY_FOUR},h=(0,r.vt)((e,t)=>({...m,reset(){let{license:t,...a}=m;e({...a})}})),x={parent:"",draftIds:[],isUseTexture:!0,topology:l.Jz.Triangle,decimationMode:l.sN.DEFAULT,targetPolycount:1e4,enablePBR:!1},p=(0,r.vt)()((0,n.Zr)((e,t)=>({...x,resetIds(){e({draftIds:[]})}}),{name:"meshy-workspace-panel-generate",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return!["draftIds","parent"].includes(t)})),version:1})),g={genMode:"text3d",parent:"",prompt:"",imageId:"",imageUrl:"",imageName:"",previewUrl:"",artStyle:l.oU.Realistic,aiModel:void 0,enablePBR:!1},v=(0,r.vt)((e,t)=>({...g,reset(){e({...g})}})),f={parent:"",artStyle:l.oU.Realistic},b=(0,r.vt)((e,t)=>({...f,reset(){e({...f})}})),j={currentAction:s.Gx.Walking},y=(0,r.vt)((e,t)=>({...j,reset(){e({...j})}})),w={parent:"",topology:l.Jz.Triangle,decimationMode:l.sN.FIXED,targetPolycount:1e4},k=(0,r.vt)()((0,n.Zr)((e,t)=>({...w,reset(){e({...w})}}),{name:"meshy-workspace-panel-remesh",partialize:e=>Object.fromEntries(Object.entries(e).filter(e=>{let[t]=e;return!["parent"].includes(t)}))})),N=()=>{let e=u.getState().reset,t=v.getState().reset,a=b.getState().reset,s=y.getState().reset;e(),t(),a(),s()},I=new Map([["draft","text-to-3d"],["image","text-to-image"],["texture","text-to-texture"]]),C=()=>{let e=i(e=>e.current);return I.get(e)}}}]);